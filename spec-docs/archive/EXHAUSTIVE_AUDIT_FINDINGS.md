# Exhaustive Audit â€” Findings Report

> **Created**: 2026-02-05
> **Last Updated**: 2026-02-06
> **Status**: PHASE 1.5 COMPLETE â€” All 129 specs audited, findings aggregated, ready for batch-fix-protocol
> **Format**: batch-fix-protocol compatible

## Summary

| Metric | Count |
|--------|-------|
| Total Specs Audited | 129 / 129 |
| MATCH (verified) | 1318 |
| MISMATCH (code â‰  spec) | 189 |
| GAP (spec exists, code missing) | 452 |
| UNDOCUMENTED (code exists, no spec) | 217 |
| Contradictions Found | 0 |
| Contradictions Resolved | 0 |
| Previously Known (from SPEC_UI_ALIGNMENT_REPORT) | 1 |
| | |
| **Phase 1.5 Final Counts** | |
| Total finding entries logged | 280 |
| â€” CRITICAL (wrong formula/logic/crash) | 29 |
| â€” MAJOR (missing connection/wrong constant) | 71 |
| â€” MISMATCH (code differs from spec) | 9 |
| â€” GAP (spec exists, code missing) | 138 |
| â€” MINOR (cosmetic/documentation) | 33 |
| Report currency assessments (Batches 14-27) | 59 |
| â€” CURRENT | 22 |
| â€” PARTIALLY_CURRENT | 22 |
| â€” OUTDATED | 15 |
| Ready for batch-fix-protocol | YES |

## Critical Findings (Tier 1)

Wrong formulas, wrong logic, data corruption risk, crash potential.

| ID | Batch | Spec | Code Location | Spec Says | Code Says | Recommended Fix |
|----|-------|------|---------------|-----------|-----------|-----------------|

## Major Findings (Tier 2)

Missing connections, wrong constants affecting behavior, backendâ†”UI gaps.

| ID | Batch | Spec | Code Location | Spec Says | Code Says | Recommended Fix |
|----|-------|------|---------------|-----------|-----------|-----------------|
| MAJ-B1-001 | 1 | BWAR_CALCULATION_SPEC.md Â§9 | N/A (missing) | Calibration data collection structure (seasonData with event totals, runsPerGame, runsPerPA) fed to recalibrateWeights/recalibrateReplacementLevel | Calibration functions exist (bwarCalculator.ts:309-362) but no data pipeline collects league aggregates to feed them | Add season-end aggregation job that collects league totals and calls recalibrate functions |
| MAJ-B1-002 | 1 | BWAR_CALCULATION_SPEC.md Â§9 | N/A (missing) | Calibration config: minSeasonsBeforeCalibration=2, minTotalPA=10000, blendFactor=0.3, blendCalibration() function | Not implemented â€” no scheduling, thresholds, or blending logic | Implement calibration scheduler with blend logic per spec |
| MAJ-B1-003 | 1 | PWAR_CALCULATION_SPEC.md Â§11 | N/A (missing) | Park factor adjustment for pitchers: applyPitcherParkFactor() adjusts FIP based on HR factor, getParkAdjustedERA() adjusts ERA | Not implemented in pwarCalculator.ts | Add pitcher park factor functions per spec |
| MAJ-B2-001 | 2 | MASTER_BASEBALL_RULES_AND_LOGIC.md Â§8 | useGameState.ts:1974-1975 | Errors (reaching on error) IS an at-bat â€” counted in AB for AVG/OBP/SLG | Code says "No AB charged on error" â€” PA++ but NO AB++ | Add `batterStats.ab++` in recordError. Affects AVG (H/AB) and SLG (TB/AB) |
| MAJ-B2-002 | 2 | MASTER_BASEBALL_RULES_AND_LOGIC.md Â§12 | GameTracker.tsx:3130-3190 | Button availability: SAC disabled@2outs, SF disabled@2outs/no-R3, DP disabled@2outs/no-runners, D3K disabled@1st-occupied+<2outs | DP/SF/SH/D3K buttons have NO disabled prop â€” always clickable | Wire isD3KLegal() and add disabled conditions per spec Â§12 |
| MAJ-B2-003 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§6.3-6.4 | useGameState.ts calculatePitcherDecisions (702-788) | Hold: reliever in save situation + maintained lead + not finisher + not W + â‰¥1 out. Blown Save: entered save situation + lead lost | hold and blownSave fields exist (init false) but NEVER set â€” calculatePitcherDecisions only computes W/L/ND/SV | Add hold/BS detection to calculatePitcherDecisions using save-situation + lead tracking |
| MAJ-B3-001 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.1 | clutchCalculator.ts getBatterBaseValue:400-401 | Spec Â§4.1 Hits: single=+0.8Ã—CQ, triple/double=+1.0Ã—CQ (separate rows). Triple and Double have same base +1.0 | Code: triple AND double AND ground_rule_double all return `{base: 1.0}` â€” triple should be higher value than double per baseball value hierarchy. Spec gives same +1.0 for both so CODE MATCHES SPEC, but note XBH isn't differentiated | N/A â€” matches spec. Consider spec update to differentiate triple (+1.1?) from double (+1.0) |
| MAJ-B3-002 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.1 | clutchCalculator.ts getBatterBaseValue:397-398 | Spec Â§4.1: inside_park_hr = +1.2Ã—LI (no CQ modifier) | Code: inside_park_hr returns `{base: 1.2, useCQ: true, modifier: 'multiply'}` â€” APPLIES CQ when spec says no CQ modifier | Change useCQ to false for inside_park_hr to match spec Â§4.1 |
| MAJ-B3-003 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.2 | clutchCalculator.ts getPitcherBaseValue:520-521 | Spec Â§4.2 Outs: Pitcher on XBH allowed = -0.9Ã—(1-CQ), single allowed = -0.8Ã—(1-CQ) | Code: triple/double/GRD all return `{base: -0.9}` but single returns `{base: -0.8}` â€” MATCHES spec | N/A â€” verified match |
| MAJ-B3-004 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§10 | useClutchCalculations.ts:237 | Spec Â§10 accumulateClutchEvent: receives clutchValue and applies playoffMultiplier INSIDE accumulate | useClutchCalculations hook: walkoff bonus is Ã— 1.5 applied BEFORE accumulate, and playoff multiplier is NEVER passed (hardcoded `false` for isPlayoff) | Wire playoffContext through to accumulateClutchEvent; walkoff Ã—1.5 bonus is undocumented approach |
| MAJ-B3-005 | 3 | FIELDING_SYSTEM_SPEC.md Â§4 | fielderInference.ts:61-91 | Spec Â§4 defines 7 directions (FL, L, LC, C, RC, R, FR) for ALL inference matrices with foul territory fielders (FL: C/3B/P for GB; LF/3B/C for FB; etc.) | Code only has 5 directions (Left, Left-Center, Center, Right-Center, Right) â€” FL and FR directions completely missing from all 4 matrices | Add FL and FR entries to all inference matrices (GROUND_BALL_INFERENCE, FLY_BALL_INFERENCE, LINE_DRIVE_INFERENCE, POP_FLY_INFERENCE) per spec Â§4 and Â§7 |
| MAJ-B3-006 | 3 | FIELDING_SYSTEM_SPEC.md Â§4 | fielderInference.ts:85-91 | Spec Â§4: Pop flies have DEPTH-aware inference (Shallowâ†’C/P, Infieldâ†’positional, OF Grassâ†’CF/LF/RF) with priority order (CF>Corner OF>SS>2B>1B/3B>P/C) | Code: POP_FLY_INFERENCE has no depth dimension â€” only direction, always returns infield positions. "Any + Shallow" (C/P) and "Any + OF Grass" (CF/LF/RF) rows completely missing | Add depth parameter to pop fly inference per spec Â§4 priority matrix |
| MAJ-B3-007 | 3 | FIELDING_SYSTEM_SPEC.md Â§11 | fielderInference.ts:93-100 | Spec Â§11: DP inference by direction: C = "1-6-3 or 6-4-3 (comebacker or up middle)" | Code: DP_CHAINS['Center'] = '6-4-3' only. Spec also mentions 1-6-3 as equal-probability center DP. Code picks one, doesn't offer both options | Add 1-6-3 as alternative center DP chain (secondary option) |
| MAJ-B3-008 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Coordinate | FieldCanvas.tsx:505-509 classifyHomeRun | Spec: wall_scraper if y<1.05, deep if y<1.2, bombâ‰¥1.2 (based on spec's 0-1.4 y-range) | Code: wall_scraper if y<0.88, deep if y<0.94, bombâ‰¥0.94 (based on FieldCanvas normalized coords where fence â‰ˆ y=0.85). Different thresholds but may be equivalent in physical space due to different coordinate mapping | Verify that both specs describe the same physical zones; if so, update spec thresholds to match FieldCanvas geometry |
| MAJ-B3-009 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Fielder Positions | FieldCanvas.tsx:366-376 FIELDERS_FEET | Spec: fielder positions at simple coordinates like P(0.5, 0.18), C(0.5, 0.08), SS(0.42, 0.40) | Code: uses field-feet coordinate system (e.g., P at mound coords, C at (5,5), SS at (65,95)) converted via fieldToNormalized(). Physical placement differs but is mathematically correct to real baseball geometry | Update spec to reference FieldCanvas FIELDER_POSITIONS (computed), not hardcoded simple coords. Spec's coords are approximate, code's are precise |
| MAJ-B3-010 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§6 | N/A (missing) | Spec Â§6: getCQTrajectoryFromZone(), getContactQualityFromZone(), getFoulContactQuality() â€” zone-to-CQ integration with depthâ†’speed/depth mapping for fly/ground balls, foul CQ table (F06=0.15, F02/F03=0.20, F01/F04=0.35, F00/F05=0.50) | NO CQ integration functions exist anywhere in codebase. Zero zone-to-CQ bridge. Clutch calculator gets CQ from exit type only, not from zone depth | Implement 3 CQ integration functions per spec Â§6; wire into recordBattedBall flow |
| MAJ-B3-011 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§8 | N/A (missing) | Spec Â§8: generateSprayPoint(zoneId, randomize), createSprayChartEntry(), createStadiumBattedBallEvent(), mapToStadiumSprayZone(), estimateDistance(), SPRAY_COLORS, SPRAY_SIZES â€” full spray chart generation from zone taps | NO spray chart generation functions exist anywhere in codebase. Zone data is captured but never converted to spray chart points or stadium batted ball events | Implement spray chart generation layer per spec Â§8; integrate with STADIUM_ANALYTICS_SPEC |
| MAJ-B4-001 | 4 | MOJO_FITNESS_SYSTEM_SPEC.md Â§6.2 | mojoEngine.ts:802-806 PlayerMojoSplits | Spec Â§6.2: MojoFitnessSplits includes battingByMojo, battingByFitness, pitchingByMojo, pitchingByFitness â€” 4 split categories with full BattingStats/PitchingStats per state | Code PlayerMojoSplits has ONLY battingByMojo (Record<MojoLevel, MojoSplitStats>). Missing: battingByFitness, pitchingByMojo, pitchingByFitness â€” 3 of 4 split categories absent | Add battingByFitness, pitchingByMojo, pitchingByFitness to PlayerMojoSplits (or create separate FitnessSplits interface) |
| MAJ-B4-002 | 4 | FAME_SYSTEM_TRACKING.md Â§Not Started | useFameDetection.ts:905-999 | Tracking doc lists COMPLETE_GAME, SHUTOUT, MADDUX as "NOT STARTED" detection functions | Code has detectCompleteGameShutout() (line 905-948) and detectMaddux() (line 955-999) FULLY IMPLEMENTED and called in checkEndGameFame() (line 1568-1580) | Update tracking doc: mark COMPLETE_GAME, SHUTOUT, MADDUX as âœ… COMPLETE |
| MAJ-B4-003 | 4 | FAME_SYSTEM_TRACKING.md Â§FameEventType | types/game.ts:571-756 | Doc says "67 types" for FameEventType | FameEventType has 154 entries â€” includes season milestones, career milestones, and negative milestone types added after tracking doc creation | Update tracking doc count to 154 |
| MAJ-B4-004 | 4 | GRADE_ALGORITHM_SPEC.md Â§Position Player Thresholds | leagueBuilderLogic.test.ts:69-80 | Spec thresholds: Sâ‰¥80, A+â‰¥78, Aâ‰¥73, A-â‰¥66, B+â‰¥58, Bâ‰¥55, B-â‰¥48, C+â‰¥45, Câ‰¥38, C-â‰¥35, D+â‰¥30, Dâ‰¥0 (data-driven from 261 player analysis) | Test helper uses: Sâ‰¥90, A+â‰¥85, Aâ‰¥80, A-â‰¥75, B+â‰¥70, Bâ‰¥65, B-â‰¥60, C+â‰¥55, Câ‰¥50, C-â‰¥45, D+â‰¥40 (simple 5-point intervals). Every threshold differs by 8-15 points | Decide authoritative thresholds: spec's are data-driven (better), test's are simpler. Update losing side. |
| MAJ-B4-005 | 4 | GRADE_ALGORITHM_SPEC.md Â§Complete Implementation | N/A (missing engine) | Spec defines full grade calculation engine: calculatePositionPlayerWeighted(), calculatePitcherWeighted(), getGradeFromWeighted(), generateProspectRatings(), generateProspectGrade(), generatePotentialCeiling(), generateArsenal() | NO grade calculation engine exists in production code. Only: (1) test helper in leagueBuilderLogic.test.ts, (2) hardcoded mock prospects in DraftFlow.tsx, (3) random-grade generator in LeagueBuilderDraft.tsx | Create gradeEngine.ts implementing all spec functions |
| MAJ-B4-006 | 4 | GRADE_ALGORITHM_SPEC.md Â§Two-Way Players | N/A (missing) | Spec: twoWayValue = (positionWeightedRating + pitcherWeightedRating) Ã— 1.25 | No two-way player grade formula implemented anywhere | Implement two-way player valuation in gradeEngine.ts |
| MAJ-B4-007 | 4 | GRADE_ALGORITHM_SPEC.md Â§Prospect Generation | LeagueBuilderDraft.tsx:51-92 | Spec: round-based probability distributions (Rd1: 25% B, 35% B-, 25% C+, 10% C, 5% C-), position stat bias (C:+10 FLD/ARM, -10 SPD), weighted rating calculation | Code: random index from GRADES array, no weighted calculation, no position bias, no round-based probability | Replace LeagueBuilderDraft.tsx generateProspects() with spec algorithm |
| CRIT-B5-001 | 5 | OFFSEASON_SYSTEM_SPEC.md Â§8.3 | FreeAgencyFlow.tsx:213-222 | Spec: FA dice assignment order diceOrder=[7,6,8,5,9,4,10,3,11,2,12] â€” best player gets 7 (16.67% leave chance) | Code: assigns DICE_PROBABILITIES array sequentially to grade-sorted players â€” best player gets dice value 2 (2.78% leave chance). INVERTED from spec intent | Fix dice assignment mapping to use spec's diceOrder array |
| CRIT-B5-002 | 5 | FARM_SYSTEM_SPEC.md Â§Rookie Salary | FinalizeAdvanceFlow.tsx:279-283 | Spec: B=$1.2M, B-=$0.9M, C+=$0.7M, C=$0.6M, C-=$0.5M | Code: B=$1.2M, B-=$1.1M, C+=$1.0M, C=$0.9M, C-=$0.8M â€” all values except B are higher | Align rookie salary constants with spec values |
| MAJ-B5-008 | 5 | OFFSEASON_SYSTEM_SPEC.md Â§7 | RetirementFlow.tsx:125-145 | Spec: retirement probability = rank-based within roster (oldest-first ranking, formula: max(5, 50-(ageRank*(45/rosterSize)))) | Code: absolute age-based probability (age 42=47%, age 25=3%, etc.) â€” different algorithm entirely | Implement rank-based retirement formula per spec |
| MAJ-B5-009 | 5 | OFFSEASON_SYSTEM_SPEC.md Â§9.3 | DraftFlow.tsx:47 | Spec: draft max grade A- (A-=5%, B+=10%, B=20%, B-=25%, C+=20%, C=15%, C-=5%) | Code: DraftProspect grade type limited to B/B-/C+/C/C- â€” no A- or B+ grades | Expand grade type and implement weighted distribution |
| MAJ-B5-010 | 5 | OFFSEASON_SYSTEM_SPEC.md Â§4.3 | AwardsCeremonyFlow.tsx | Spec: MVP weights WAR 40%, Clutch 25%, Traditional 15%, Team 12%, Fame 8%; CY weights pWAR 40%, Advanced 25%, Clutch 25%, Team 5%, Fame 5% | Code: No voting weight calculations â€” awards are user-selected from mock candidates | Implement voting weight calculations per spec |
| MAJ-B5-011 | 5 | TRADE_SYSTEM_SPEC.md Â§4 | FreeAgencyFlow.tsx, TradeFlow.tsx | Spec: trade matching uses Contract Value with 10% threshold (max(valueA,valueB)*0.10) | Code: Figma TradeFlow has NO trade validation; older TradeProposalBuilder uses different ratio-based approach | Implement calculatePackageValue and isTradeValid per spec |
| MAJ-B5-012 | 5 | NARRATIVE_SYSTEM_SPEC.md Â§3 | narrativeEngine.ts:763 | Spec: streak amplifier activates at streak >= 3 | Code: activates at streak >= 5 | Change threshold from 5 to 3 |
| MAJ-B5-013 | 5 | FARM_SYSTEM_SPEC.md Â§Send-Down | FinalizeAdvanceFlow.tsx:267 | Spec: graduated send-down morale (1st=-20, 2nd=-30, 3rd+=-40) | Code: flat -18 morale hit regardless of demotion count | Implement graduated morale per spec |
| MAJ-B5-014 | 5 | OFFSEASON_SYSTEM_SPEC.md Â§2 | offseasonStorage.ts vs useOffseasonPhase.ts | Spec: 11 phases in strict order | Code: TWO conflicting phase systems â€” offseasonStorage.ts has 10 string-enum phases, useOffseasonPhase.ts has 10 numbered phases with different phase lists (splits FA into 3 sub-phases, omits Contraction/Expansion and Chemistry Rebalancing) | Consolidate into single phase system matching spec's 11 phases |
| CRIT-B6-001 | 6 | AWARDS_CEREMONY_FIGMA_SPEC.md Â§Trait Replacement | AwardsCeremonyFlow.tsx | Spec: Trait Replacement Modal when player at max 2 traits earns new trait (lines 997-1049) | Code: NO Trait Replacement Modal implemented. Award screens grant traits but never check trait cap or offer replacement choice | Implement TraitReplacementModal component |
| CRIT-B6-002 | 6 | AWARDS_CEREMONY_FIGMA_SPEC.md Â§Other Player | AwardsCeremonyFlow.tsx:588,900,1023 | Spec: "Other Player" buttons open searchable modal with league filter (lines 1052-1094) | Code: "Other Player..." buttons exist at 6 locations but have NO onClick handler â€” completely non-functional | Wire onClick to open player search modal |
| CRIT-B6-003 | 6 | AWARDS_CEREMONY_FIGMA_SPEC.md Â§Awards Save | AwardsCeremonyFlow.tsx | Spec: Awards saved with trait/rating changes applied to player records | Code: addAward() callback is defined but NEVER CALLED by any sub-screen â€” zero awards are accumulated or saved | Wire addAward() calls in each award sub-screen |
| CRIT-B6-004 | 6 | CONTRACTION_EXPANSION_FIGMA_SPEC.md Â§Screens 6-11 | ContractionExpansionFlow.tsx:1006-1274 | Spec: 5 detailed screens (Expansion Draft, Scorned Effects, Player Disposal, Team Creation Wizard, Expansion Team Draft) | Code: ALL 5 screens are PLACEHOLDER text only ("Full draft simulation coming in next phase", "Retirement checks complete", etc.) | Implement all 5 placeholder screens |
| CRIT-B6-005 | 6 | DRAFT_FIGMA_SPEC.md Â§Farm Model | DraftFlow.tsx:72 | Spec: Farm max=10, release modal when full (lines 424-495) | Code: Farm "can exceed 10" (line 72, 1347). No release mechanism. Fundamentally different roster model â€” Screen 6 (Release Player Modal) entirely absent | Decide: adopt spec's 10-cap model and implement release modal, or update spec |
| MAJ-B6-006 | 6 | AWARDS_CEREMONY_FIGMA_SPEC.md Â§All Data | AwardsCeremonyFlow.tsx:480-1878 | Spec: Candidates computed from actual season stats | Code: ALL candidates/winners across ALL 13 screens use HARDCODED mock data (real player names like Lindor, Ohtani, etc.) â€” data wiring infra exists but unused by sub-screens | Connect sub-screens to useOffseasonData/convertToAwardPlayer |
| MAJ-B6-007 | 6 | CONTRACTION_EXPANSION_FIGMA_SPEC.md Â§Persistence | ContractionExpansionFlow.tsx | Spec: Results must persist | Code: ALL state in React useState â€” no IndexedDB calls. offseasonStorage.ts has CONTRACTION_EXPANSION phase but no dedicated store operations. All data lost on refresh | Implement contraction-specific IndexedDB store operations |
| MAJ-B6-008 | 6 | DRAFT_FIGMA_SPEC.md Â§Auto-Draft | DraftFlow.tsx | Spec: Auto-Draft Options modal with 3 modes + priority settings (lines 740-782) | Code: AI picks handled silently, no user-facing auto-draft configuration UI | Implement auto-draft options modal |
| MAJ-B6-009 | 6 | EOS_RATINGS_FIGMA_SPEC.md Â§Two-Way | RatingsAdjustmentFlow.tsx:7,832 | Spec: Dedicated Two-Way card showing BOTH batting+pitching adjustments (lines 610-626) | Code: "TWO-WAY" in Position type but zero rendering logic for two-way players | Add two-way player detection and dual-card rendering |
| MAJ-B6-010 | 6 | EOS_RATINGS_FIGMA_SPEC.md Â§Synthetic Data | RatingsAdjustmentFlow.tsx:133 | Spec: Rating changes from actual EOS adjustment engine | Code: convertToLocalPlayer generates RANDOM rating changes (Math.random() * 20 - 8) even with real data loaded â€” display data is entirely synthetic | Wire actual EOS adjustment engine output |
| MAJ-B6-011 | 6 | FREE_AGENCY_FIGMA_SPEC.md Â§Signing Screen | FreeAgencyFlow.tsx | Spec: Free Agent Pool/Signing Screen with contract details, team selector, payroll warning (lines 662-722) | Code: Entire supplemental signing screen NOT implemented | Implement free agent pool browsing and signing screen |
| MAJ-B6-012 | 6 | FREE_AGENCY_FIGMA_SPEC.md Â§Drag Reorder | FreeAgencyFlow.tsx:691-706 | Spec: Drag-to-reorder dice assignment rows with drag handles (lines 236-253) | Code: UP/DOWN arrow buttons for swapping adjacent rows â€” functionally equivalent but different UX for iPad | Consider implementing drag gesture for iPad-friendly UX |
| CRIT-B7-001 | 7 | FINALIZE_ADVANCE_FIGMA_SPEC.md Â§Season Transition | FinalizeAdvanceFlow.tsx:366-377 | Spec: Season transition performs 8 real operations (archive data, increment ages, recalc salaries, reset mojo, clear stats, apply rookies, increment service, finalize) | Code: startSeasonTransition() is a TIMER SIMULATION â€” no actual data mutations, just step counter every 600ms. Only real effect: incrementing season number in localStorage | Implement actual season transition operations |
| CRIT-B7-002 | 7 | FINALIZE_ADVANCE_FIGMA_SPEC.md Â§AI Roster | FinalizeAdvanceFlow.tsx:352-364 | Spec: AI processes non-user team rosters with call-ups, send-downs, retirements | Code: aiProcessing() is TIMER SIMULATION with hardcoded display text â€” no AI logic generates actual roster transactions | Implement AI roster management engine |
| CRIT-B7-003 | 7 | LEAGUE_BUILDER_FIGMA_SPEC.md Â§Rules Editor | LeagueBuilderRules.tsx:9 | Spec: 8 Rules Editor tabs (Game, Season, Playoffs, DH, Roster, Econ, Dev, AI) | Code: Only 3 tabs (game, season, playoffs) â€” 5 tabs entirely missing (DH, Roster, Econ, Dev, AI) | Implement missing 5 Rules Editor tabs |
| CRIT-B7-004 | 7 | LEAGUE_BUILDER_FIGMA_SPEC.md Â§League Editor | LeagueBuilderLeagues.tsx:328-472 | Spec: 5-step creation wizard (Nameâ†’Teamsâ†’Structureâ†’Rulesâ†’Review) with Back/Next | Code: Single flat modal with all fields at once. No step indicator, no wizard navigation | Redesign as 5-step wizard or update spec |
| CRIT-B7-005 | 7 | PLAYOFFS_FIGMA_SPEC.md Â§Screens 2-6,9 | N/A (missing) | Spec: 6 screens (Series Detail, Start Game Modal, Game Complete, Series MVP, Championship Celebration, Roster Management) | Code: ALL 6 screens entirely missing â€” no UI pathway to start playoff games, record results, award MVPs, or celebrate championships | Implement all 6 missing playoff screens |
| CRIT-B7-006 | 7 | PLAYOFFS_FIGMA_SPEC.md Â§Clutch Multipliers | clutchCalculator.ts:186 | Spec: Division Series base = 1.75x | Code: division_series = 1.5x â€” 0.25 lower than spec | Update clutch multiplier constant |
| CRIT-B7-007 | 7 | RETIREMENT_FIGMA_SPEC.md Â§Probability Engine | RetirementFlow.tsx:125-145 | Spec: Age-weighted dice rolls per player with agingEngine.ts (factors rating, fame, age) | Code: RetirementFlow uses its OWN local probability function, completely disconnected from base agingEngine.ts â€” two competing probability systems | Wire RetirementFlow to use agingEngine.ts calculateRetirementProbability |
| CRIT-B7-008 | 7 | SCHEDULE_SYSTEM_FIGMA_SPEC.md Â§Today's Game | FranchiseHome.tsx:1731-2040 | Spec: Today's Game auto-populates from schedule's next scheduled game | Code: GameDayContent is ENTIRELY HARDCODED (team IDs 'tigers'/'sox', records "42-28"/"38-32", date "7/12", game "71/162") â€” TODO comments confirm not wired to scheduleData | Wire GameDayContent to scheduleData.nextGame |
| MAJ-B7-009 | 7 | FINALIZE_ADVANCE_FIGMA_SPEC.md Â§Transaction Report | FinalizeAdvanceFlow.tsx:816-833 | Spec: Report shows retirement count, user/AI breakdown, filter dropdowns | Code: Only shows Total/Call-Ups/Send-Downs â€” missing retirement count, user/AI split, and filter controls | Add retirement rows, user/AI breakdown, filter dropdowns |
| MAJ-B7-010 | 7 | LEAGUE_BUILDER_FIGMA_SPEC.md Â§Presets | leagueBuilderStorage.ts:619-698 | Spec: 4 presets (Standard 32 games, Quick Play, Full Sim 12 playoffs, Arcade Mode) | Code: 3 presets (Standard 50 games, Quick Play, Full Sim 10 playoffs) â€” Arcade Mode absent, games/playoffs wrong | Add Arcade Mode preset, fix Standard games to 32, fix Full Sim playoffs to 12 |
| MAJ-B7-011 | 7 | LEAGUE_BUILDER_FIGMA_SPEC.md Â§Missing Screens | N/A | Spec: Team CSV Import (P1), Player Generator (P1), Draft Board (P1) | Code: All three P1-priority screens entirely absent â€” no CSV import, no player generation, no draft execution | Implement 3 missing P1 screens |
| MAJ-B7-012 | 7 | PLAYOFFS_FIGMA_SPEC.md Â§Round Names | playoffStorage.ts, WorldSeries.tsx, test file | Spec: "Wild Card", "Division Series", "Championship", "World Series" | Code: Three DIFFERENT naming schemes across 3 files â€” none match spec. "World Series" never appears in any getRoundName function | Consolidate to single getRoundName matching spec names |
| MAJ-B7-013 | 7 | RETIREMENT_FIGMA_SPEC.md Â§Team History | RetirementFlow.tsx:781-797 | Spec: Jersey decision shows player's actual team history with per-team seasons/WAR/awards | Code: teamsPlayedFor HARDCODED to first 2 teams from allTeams with fake stats (8 seasons/32.1 WAR and 12 seasons/48.7 WAR) â€” every retired player shows same history | Wire real player career history data |
| MAJ-B7-014 | 7 | RETIREMENT_FIGMA_SPEC.md Â§Stadium Name | RetirementFlow.tsx:929 | Spec: "Jersey will hang at Thunder Stadium" | Code: `team.name.split(' ')[0] + ' Stadium'` produces "New Stadium" for "New York Thunder" â€” takes city name not team name | Fix to extract last word (team nickname) not first word |
| MAJ-B7-015 | 7 | SCHEDULE_SYSTEM_FIGMA_SPEC.md Â§Empty State | FranchiseHome.tsx GameDayContent | Spec: "NO GAMES IN QUEUE" empty state with [Go to Schedule] and [Add Game Now] buttons | Code: No empty state â€” always renders hardcoded "TIGERS vs SOX" card regardless of schedule | Implement empty state when no scheduled games exist |
| CRIT-B8-001 | 8 | SEASON_END_FIGMA_SPEC.md Â§Screens 2-3 | N/A (missing) | Spec: Postseason MVP 3-card flip reveal + confirmation with pWAR ranking, 3D card animation, rating +10 bonus | Code: ENTIRELY MISSING â€” no postseason MVP card reveal, no pWAR calculation, no rating bonus mechanism | Implement Postseason MVP card reveal flow |
| CRIT-B8-002 | 8 | SEASON_END_FIGMA_SPEC.md Â§Season End Flow | Multiple files | Spec: 7-screen sequential Season End flow (Standingsâ†’MVPâ†’Championshipâ†’Mojoâ†’Archiveâ†’Complete) | Code: NO dedicated Season End flow â€” responsibilities split across FranchiseHome standings tab, FinalizeAdvanceFlow (timer simulation), AwardsCeremonyFlow. Screens 4-6 collapsed into single processing animation | Create unified SeasonEndFlow component |
| CRIT-B8-003 | 8 | SEASON_SETUP_FIGMA_SPEC.md Â§Persistence | FranchiseSetup.tsx:107-108 | Spec: "START FRANCHISE" creates save slot with all config data persisted | Code: navigates to "/franchise/new" (invalid route) with NO save logic â€” ALL wizard data lost on navigation | Implement franchise config persistence |
| CRIT-B8-004 | 8 | SEASON_SETUP_FIGMA_SPEC.md Â§Team Control | FranchiseSetup.tsx:944-987 | Spec: Teams grouped by Conference AND Division (AL East, AL West, NL East, NL West) | Code: Flat grid under single "LEAGUE TEAMS" heading â€” no conference/division grouping | Add conference/division hierarchy to team grid |
| CRIT-B8-005 | 8 | TRADE_FIGMA_SPEC.md Â§Waiver Wire | TradeFlow.tsx (types only) | Spec: Waiver Wire Claim + Results screens with claim order, roster check, PASS/CLAIM | Code: Screen types and interfaces defined but ZERO UI rendering â€” both screens entirely unimplemented | Implement waiver wire claim and results screens |
| CRIT-B8-006 | 8 | TRADE_FIGMA_SPEC.md Â§Counter Offer | TradeFlow.tsx:1144-1146 | Spec: Accepting counter should use counter-offered deal data | Code: Sets aiResponse="accepted" but does NOT update currentTrade to counter data â€” accepted screen shows ORIGINAL trade, not the counter offer | Fix to use aiCounter data on acceptance |
| CRIT-B8-007 | 8 | SUBSTITUTION_FLOW_SPEC.md Â§UI Integration | GameTracker.tsx:19-26 | Spec: 6 substitution modals (PH, PR, DEF, PITCH, DS, POS) rendered in GameTracker with Substitution button | Code: ALL 6 modals are ORPHANED â€” fully built but NEVER imported or rendered by GameTracker.tsx. GameTracker uses LineupCard drag-drop instead | Import and wire all 6 substitution modals into GameTracker |
| MAJ-B8-008 | 8 | SEASON_END_FIGMA_SPEC.md Â§Championship | FinalizeAdvanceFlow.tsx:1016-1035 | Spec: +1 Fame to all championship players, +20 morale, two-column roster display | Code: Season summary hardcodes "San Francisco Giants"/"Barry Bonds" â€” no real fame/morale bonuses applied | Wire real champion data and apply fame/morale bonuses |
| MAJ-B8-009 | 8 | SEASON_SETUP_FIGMA_SPEC.md Â§Playoff Mode | N/A (missing) | Spec: SS-F008/F009 Playoff Mode Entry + Seeding screens with drag-to-reorder, auto-seed | Code: Entire Playoff Mode entry flow missing â€” no seeding configuration UI | Implement playoff mode entry and seeding screens |
| MAJ-B8-010 | 8 | TRADE_FIGMA_SPEC.md Â§AI Proposals | TradeFlow.tsx:305-315 | Spec: Multiple AI proposals from different teams with real logic | Code: Single hardcoded mockAIProposals entry; Counter button goes to inbox instead of builder; Decline doesn't remove proposal | Implement real AI proposal generation |
| MAJ-B8-011 | 8 | SUBSTITUTION_FLOW_SPEC.md Â§Validation | substitution.ts, game.ts | Spec: SUBSTITUTION_RULES constant, validateSubstitution with pitch count check, validateLineup with 9-position check | Code: SUBSTITUTION_RULES missing, validateSubstitution has different params, validateLineup missing entirely, validateDefensiveAlignment exists but ORPHANED (never called) | Implement/wire validation functions |
| CRIT-B9-001 | 9 | ADAPTIVE_STANDARDS_ENGINE_SPEC.md Â§4 | milestoneDetector.ts:22-24 | Spec: Default season 50 games, 9 innings per game | Code defaults: 128 games, 6 innings per game â€” wrong baseline for SMB4 | Change milestoneDetector defaults to 50 games, 9 innings |
| CRIT-B9-002 | 9 | ADAPTIVE_STANDARDS_ENGINE_SPEC.md Â§4 | milestoneDetector.ts | Spec: Counting stat scaling uses opportunityFactor (gamesPerSeason/162 adjusted for PA/IP opportunity) | Code: Uses simple seasonFactor = gamesPerSeason/162 with no PA/IP opportunity adjustment | Implement opportunityFactor per spec |
| CRIT-B9-003 | 9 | ADAPTIVE_STANDARDS_ENGINE_SPEC.md Â§4 | milestoneDetector.ts | Spec: QS threshold scales with innings per game (e.g., 6IP threshold for 9-inning games) | Code: QS threshold hardcoded at 6 IP and 3 ER regardless of innings per game | Scale QS threshold with inningsPerGame |
| CRIT-B9-004 | 9 | AUTO_CORRECTION_SYSTEM_SPEC.md Â§All | useGameState.ts:473 | Spec: autoCorrectResult is core design pattern â€” should run after every play to correct invalid states | autoCorrectResult() exists at line 473 but is NEVER CALLED from the Figma UI â€” completely orphaned dead code | Wire autoCorrectResult into play recording flow |
| CRIT-B9-005 | 9 | FAN_MORALE_SYSTEM_SPEC.md Â§UI | FanMoralePanel.tsx | Spec: 7 FanState thresholds (ECSTATIC â‰¥90, EXCITED â‰¥75, ENGAGED â‰¥60, CONTENT â‰¥45, RESTLESS â‰¥30, FRUSTRATED â‰¥15, HOSTILE <15) | Code: WRONG thresholds AND uses non-spec state "SUPPORTIVE" not in spec | Fix FanMoralePanel.tsx thresholds to match spec |
| CRIT-B9-006 | 9 | MILESTONE_SYSTEM_SPEC.md Â§Fame Values | fameEngine.ts vs milestoneDetector.ts | Spec: ~20 single-game Fame values specified precisely | Code: ~18 values differ 2-3Ã— between spec and fameEngine (Perfect Game 5 vs 10, No-Hitter 3 vs 6, Cycle 3 vs 2, Walk-Off HR 1.5 vs 1, etc.) | Align all Fame values with spec |
| CRIT-B9-007 | 9 | MILESTONE_SYSTEM_SPEC.md Â§Franchise | franchiseStorage.ts | Spec: Franchise first/leader tracking with 50% season threshold | Code: franchiseStorage.ts is ENTIRELY STUBS â€” all functions return null. Franchise leader activation is 10% in code vs 50% in spec | Implement franchise storage or document as deferred |
| MAJ-B9-001 | 9 | ADAPTIVE_STANDARDS_ENGINE_SPEC.md Â§3 | N/A (missing) | Spec: AdaptiveStandardsEngine class with IndexedDB persistence for baselines, smoothing algorithm, mid-season estimates | Code: No engine class exists. Static constants only (Phase 1). Phases 2-5 entirely absent | Implement AdaptiveStandardsEngine (or document as future phase) |
| MAJ-B9-002 | 9 | ADAPTIVE_STANDARDS_ENGINE_SPEC.md Â§Maddux | milestoneDetector.ts | Spec: Maddux threshold 85 pitches for 9-inning game | Code: Uses 100 pitches as threshold | Change Maddux threshold from 100 to 85 |
| MAJ-B9-003 | 9 | ADAPTIVE_STANDARDS_ENGINE_SPEC.md Â§rWAR | rwarCalculator.ts | Spec: runsPerGame baseline 3.19 (SMB4-specific) | Code: Uses 4.8 as runsPerGame baseline | Change runsPerGame from 4.8 to 3.19 |
| MAJ-B9-004 | 9 | DYNAMIC_DESIGNATIONS_SPEC.md Â§Cornerstone | designationEngine.ts | Spec: RETAINED_CORNERSTONE Fame +0.3 | Code: RETAINED_CORNERSTONE = +0.5 | Change from 0.5 to 0.3 |
| MAJ-B9-005 | 9 | DYNAMIC_DESIGNATIONS_SPEC.md Â§Fan Favorite | N/A (missing) | Spec: Fan Favorite + Albatross designation system with detection, UI badges, fame, offseason effects | Code: ENTIRELY MISSING â€” zero implementation | Implement Fan Favorite/Albatross system |
| MAJ-B9-006 | 9 | FAN_MORALE_SYSTEM_SPEC.md Â§Integration | fanMoraleEngine.ts | Spec: Engine functions wired to game-end, trade, roster move, streak, drift events | Code: EXCELLENT core engine but MOSTLY ORPHANED â€” functions exist but are rarely called from UI | Wire fanMoraleEngine integration points |
| MAJ-B9-007 | 9 | MILESTONE_SYSTEM_SPEC.md Â§Team | N/A (missing) | Spec: Team milestones section with franchise records | Code: Entire team milestones section unimplemented | Implement team milestone detection |
| MAJ-B10-001 | 10 | SPECIAL_EVENTS_SPEC.md Â§6.1 | N/A (missing) | Spec Â§6.1: GameSpecialEvents aggregate record with events array, quick counts (nutShots, killedPitchers, tootblans, webGems, robberies, walkOffs, comebackWin) | No GameSpecialEvents type or storage exists â€” individual Fame events recorded but no game-level special events aggregation | Implement GameSpecialEvents type and storage |
| MAJ-B10-002 | 10 | SPECIAL_EVENTS_SPEC.md Â§6.2 | N/A (missing) | Spec Â§6.2: PlayerSpecialStats season/career tracking (nutShotsDelivered, killedPitchers, tootblans, webGems, robberies, cyclesHit, madduxes, etc.) | No PlayerSpecialStats interface or tracking exists â€” special events are Fame events only, not tracked as player stats | Implement PlayerSpecialStats interface and aggregation |
| MAJ-B10-003 | 10 | SPECIAL_EVENTS_SPEC.md Â§7.1 | GameTracker.tsx | Spec Â§7.1: Special Events Quick Access buttons in GameTracker (ðŸ¥œ Nut Shot, ðŸ’¥ Killed Pitcher, ðŸ¤¦ TOOTBLAN, â­ Web Gem, ðŸŽ­ Robbery, ðŸ  Inside Park HR) | Code: NO special event quick-access buttons in GameTracker UI. handleSpecialEvent function exists (line 1624) but no buttons trigger it | Add special events button panel to GameTracker UI |
| MAJ-B10-004 | 10 | SPECIAL_EVENTS_SPEC.md Â§7.2 | GameTracker.tsx | Spec Â§7.2: Post-play prompts for special events (comebackerâ†’Killed Pitcher?, diving catchâ†’Web Gem?, pickoffâ†’TOOTBLAN?) | Code: Detection functions exist in detectionFunctions.ts but are NEVER called from the GameTracker play flow. runPlayDetections() exists in detectionIntegration.ts but unused | Wire runPlayDetections into GameTracker after each play |
| MAJ-B10-005 | 10 | SPECIAL_EVENTS_SPEC.md Â§7.3-7.5 | N/A (missing) | Spec Â§7.3-7.5: Auto-detected event notification toasts, special events log view, end-of-game special events summary | Code: UIDetectionResult type exists but no toast rendering, no event log view, no end-of-game summary | Implement notification toasts and summary views |
| MAJ-B10-006 | 10 | SPECIAL_EVENTS_SPEC.md Â§8 | N/A (missing) | Spec Â§8: SPECIAL_EVENT_COMMENTARY arrays (10 event types Ã— 4 lines each), generateWeeklyNarrative(), SeasonAwardsNominations (mrClutch, webGemKing, intimidationAward, ironMan, tootblanKing, rallyKillerAward, goldenSombreroChamp) | No narrative generation for special events exists anywhere in codebase | Implement special event commentary and season awards tracking |
| MAJ-B10-007 | 10 | SPECIAL_EVENTS_SPEC.md Â§2-4 | N/A (missing) | Spec Â§2-4: Detailed typed event interfaces (NutShotEvent, TootblanEvent, KilledPitcherEvent) with rich data: severity, playResult, hitLocation, tootblanType, situationBefore, etc. | Code: Detection uses simple FameEventType strings with no structured event data â€” only eventType + message returned, no rich data captured | Implement detailed event interfaces for rich event recording |
| MAJ-B10-008 | 10 | STADIUM_ANALYTICS_SPEC.md Â§2-3 | N/A (missing) | Spec Â§2-3: Full Stadium data structure with StadiumDimensions, dynamic park factor calculation from game data, seed factor generation, confidence-based blending, historical tracking | Code: Only ParkFactors interface exists in bwarCalculator.ts (consumed for WAR). No Stadium object, no dimension tracking, no dynamic calculation, no seed generation, no blending, no historical snapshots | Implement Stadium data structure and park factor calculation engine (DRAFT spec â€” defer until core features complete) |
| MAJ-B10-009 | 10 | STADIUM_ANALYTICS_SPEC.md Â§4 | N/A (missing) | Spec Â§4: Spray chart tracking with 7 SprayZone types, BattedBallEvent recording, zone aggregation, handedness splits, heat map visualization | No spray chart system exists. FIELD_ZONE_INPUT_SPEC spray chart gap (MAJ-B3-011) already identified. This spec provides the target data model | Implement spray chart system per this spec (prerequisite: FIELD_ZONE_INPUT zone-to-spray bridge from MAJ-B3-011) |
| MAJ-B10-010 | 10 | STADIUM_ANALYTICS_SPEC.md Â§5 | N/A (missing) | Spec Â§5: Stadium records system (single-game records, HR distance records by zone, career records at stadium, team records) with record checking after each game and notifications | No stadium records system exists | Implement after Stadium data structure (MAJ-B10-008) |
| MAJ-B10-011 | 10 | STADIUM_ANALYTICS_SPEC.md Â§8 | ParkFactorDisplay.tsx (ORPHANED) | Spec Â§8: Stadium tab with spray chart, park factors, records, historical factors, player context UI with park-adjusted stats | ParkFactorDisplay.tsx exists (236 lines) but is ORPHANED â€” never imported. No stadium tab, no spray chart UI, no records view, no historical view, no player park-adjusted context | Wire ParkFactorDisplay into FranchiseHome or create Stadium tab |
| MAJ-B10-012 | 10 | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§6 | useDataIntegrity.ts:61-178 | Spec Â§6: Recovery path re-aggregates from event log if aggregation failed | aggregateGameFromEventLog() has TODO comments â€” logs rebuilt stats but does NOT actually call aggregateToSeason(). Recovery is incomplete | Wire actual season aggregation into recovery path |
| MAJ-B10-013 | 10 | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§3.4 | N/A (missing) | Spec Â§3.4: finalizeSeason() aggregates season stats into career totals with seasonHistory archive | No season finalization function exists. Career stats updated game-by-game via milestoneAggregator, but no explicit seasonâ†’career aggregation or seasonHistory array | Implement season finalization or update spec to reflect game-by-game career updates
| MAJ-B10-014 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§5 | agingEngine.ts:58-74, 153-187 | Retirement probability: age 28-29=2%, 30-31=5%, 32-33=10%, 34-35=20%, 36-37=35%, 38-39=50%, 40+=70%. Modifier uses WAR delta (performanceDelta). Max 90% | Code: no retirement before 35. Different curve (35=5%, 36=8%...49=100%). Uses overallRating+fame modifiers instead of WAR delta. Max 100% | Dedicate AGING_SYSTEM_SPEC governs â€” master spec retirement constants are OUTDATED. Update master spec Â§5 to reference aging spec
| MAJ-B10-015 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§6 | N/A (missing) | HOF Score: careerWARÃ—1.5 + MVPÃ—15 + CYÃ—15 + AllStarÃ—3 + GGÃ—2 + championshipsÃ—5. Entry criteria: WARâ‰¥50 OR MVPâ‰¥1 OR AllStarâ‰¥5 OR user override | No calculateHOFScore() function exists anywhere in codebase. Museum storage exists but HOF induction logic is missing | Implement HOF score calculation and induction logic

## Minor Findings (Tier 3)

Cosmetic issues, label text, documentation-only.

| ID | Batch | Spec | Code Location | Spec Says | Code Says | Recommended Fix |
|----|-------|------|---------------|-----------|-----------|-----------------|
| MIN-B1-001 | 1 | BWAR_CALCULATION_SPEC.md Â§6 | bwarCalculator.ts:234 | League adjustment for multi-league setups: `applyLeagueAdjustment(battingRuns, playerLeagueRunsPerPA, overallLeagueRunsPerPA, PA)` | `leagueAdjustment = 0` placeholder â€” single-league by design | Doc-only: note as intentional single-league simplification |
| MIN-B1-002 | 1 | PWAR_CALCULATION_SPEC.md Â§9 | pwarCalculator.ts:431 | Calibration min IP = 500 league-wide, dynamic weight = min(0.4, totalIP/2000) | Code uses min IP = 100, fixed blendWeight = 0.3 param | Update minimum to 500 and add dynamic weight calc |
| MIN-B1-003 | 1 | PWAR_CALCULATION_SPEC.md Â§9 | pwarCalculator.ts:455 | Confidence starts at 0.3, increases by dataWeightÃ—0.5 | Code increases by blendWeightÃ—0.2, starts at 1.0 for default context | Align confidence increment formula |
| MIN-B1-004 | 1 | FWAR_CALCULATION_SPEC.md Â§8 | fwarCalculator.ts:283 | Missed dive (good effort) = 0.0x penalty (no fWAR impact) | Code applies wasDifficult=0.7Ã— modifier but doesn't zero out for missed dives | Add missed_dive handling with 0.0 penalty per spec |
| MIN-B1-005 | 1 | RWAR_CALCULATION_SPEC.md Â§5 | rwarCalculator.ts:239 | Separate tag-up events: secondToHome_onFlyOut (0.45) vs thirdToHome_onFlyOut (0.45) | Code uses single `tagsScored` for all tag-ups (same value 0.45) | Document simplification or add granularity |
| MIN-B1-006 | 1 | RWAR_CALCULATION_SPEC.md Â§8 | N/A | RunnerAdvancement schema with advancementType: forced/extra/held/out, couldHaveAdvanced | Simpler AdvancementStats interface without granular classification | Consider for full UBR tracking |
| MIN-B1-007 | 1 | MWAR_CALCULATION_SPEC.md Â§5 | mwarCalculator.ts:214 | Pinch hitter failure: K/GIDP = -0.5Ã—âˆšLI, regular outs = -0.3Ã—âˆšLI (tiered) | Single flat value: failure = -0.4 (averages the two tiers) | Add tiered failure values or document as intentional simplification |
| MIN-B1-008 | 1 | MWAR_CALCULATION_SPEC.md Â§5 | mwarCalculator.ts:217 | IBB failure: hit = -0.4Ã—âˆšLI (or -0.5Ã—âˆšLI - runsÃ—0.2 if runs score), walk = -0.3Ã—âˆšLI (tiered) | Single flat value: failure = -0.5 | Add tiered IBB failure with runs-scored penalty or document simplification |
| MIN-B2-001 | 2 | RUNNER_ADVANCEMENT_RULES.md Â§4 | runnerDefaults.ts:238 | Line out (LO) allows tag-up per spec matrix (same as FO) | Code: isDeepFly = (outType === 'FO') so LO defaults R3 to hold, not tag-up | Either add LO to isDeepFly check or document as intentional (LO tag-up is very rare) |
| MIN-B2-002 | 2 | INHERITED_RUNNERS_SPEC.md Â§9.1 | inheritedRunnerTracker.ts:330 | Multiple pitching changes: runners trace back to original pitcher (inheritedFrom shows chain Aâ†’Bâ†’C) | handlePitchingChange overwrites inheritedFromPitcherId to latest outgoing on every call â€” loses chain history (Aâ†’B overwrites A) | Only set inheritedFromPitcherId if not already set: `inheritedFromPitcherId: runner.inheritedFromPitcherId ?? outgoingPitcherId` |
| MIN-B2-003 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§9.1 | GameTracker.tsx:1876 | Maddux threshold: < ceil(9 Ã— 9.44) = 85 pitches for 9-inning game | Code: `pStats.pitchCount < 100` â€” too lenient (95-pitch CGSO would qualify as Maddux) | Change threshold to 85 or implement getMadduxThreshold(innings) per spec |
| MIN-B2-004 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§5.3 | useGameState.ts:722-733 | Loss assigned to "pitcher who allowed go-ahead run" (pitcher of record when lead was taken) | Code uses simplified "highest runsAllowed on losing team" approximation | Document as intentional simplification or implement lead-tracking for true POR |
| MIN-B3-001 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.2 | clutchCalculator.ts getPitcherBaseValue:534-535 | Spec Â§4.2: Routine fly/ground out for pitcher = +0.4Ã—CQ (same value for both). Popup = +0.5Ã—LI | Code: fly/ground/popup all return `{base: 0.4}` â€” Popup should be 0.5 per spec | Change popup_out pitcher base to 0.5 |
| MIN-B3-002 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.2 | clutchCalculator.ts getPitcherBaseValue:534 | Spec Â§4.2: Ground out for pitcher = +0.5Ã—CQÃ—LI | Code: ground_out returns same as fly_out `{base: 0.4}` â€” spec says 0.5 for ground_out | Change ground_out pitcher base to 0.5 |
| MIN-B3-003 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.6 | clutchCalculator.ts getPitcherBaseValue:556-558 | Spec Â§4.8: Wild pitch runner advances = -0.6Ã—LI, run scores = -0.8Ã—LI | Code: wild_pitch flat -0.7 regardless of whether run scored or runner just advanced | Split WP into WP_advance (-0.6) and WP_scores (-0.8) or keep as minor averaging |
| MIN-B3-004 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.4 | clutchCalculator.ts getFielderBaseValue:583-588 | Spec Â§4.4: Error on hard grounder fielder = -0.6Ã—LI. Code error on routine = -1.0, on diving = +0.2, else = -0.6 | Code matches spec's routine=-1.0, hard=-0.6 mapping for standard errors. Throwing error code=-0.8 matches spec's -0.8Ã—LI | N/A â€” verified match for standard errors |
| MIN-B3-005 | 3 | LEVERAGE_INDEX_SPEC.md Â§6 | leverageCalculator.ts getScoreDampener:269-271 | Spec Â§6: 3-run game dampener "scale from 0.60 (early) to 0.72 (late)" â€” comment says early = lower LI for deficit | Code comment says "Early inning = more comeback potential = higher leverage" and "Late inning = less comeback potential = lower leverage" â€” but formula produces HIGHER values later (0.60 + 0.12Ã—inning/9), meaning late-inning 3-run games get MORE leverage. This is backwards from the comment but matches the SPEC formula exactly | Fix comment to match behavior: early deficit = less urgent (0.60), late deficit = more urgent (0.72) |
| MIN-B3-006 | 3 | FIELDING_SYSTEM_SPEC.md Â§4 | fielderInference.ts:70 | Spec Â§4 FO+L(Left): Primary=LF, Secondary=CF, Tertiary=3B | Code FLY_BALL_INFERENCE['Left']={primary:'LF', secondary:'CF', tertiary:'3B'} â€” MATCH | N/A â€” verified |
| MIN-B3-007 | 3 | FIELDING_SYSTEM_SPEC.md Â§2 | game.ts:174-182 | Spec Â§2 maps resultâ†’battedBallType: FO=Fly Ball, LO=Line Drive | game.ts has simple inferFielder() map that uses LOâ†’LF/CF/RF (outfield-centric) vs fielderInference.ts LINE_DRIVEâ†’3B/SS/P/2B/1B (infield-centric). TWO COMPETING INFERENCE SYSTEMS | Consolidate: game.ts inferFielder() is simpler/less accurate. fielderInference.ts is spec-compliant. Mark game.ts version as deprecated |
| MIN-B3-008 | 3 | FIELDING_SYSTEM_SPEC.md Â§4 | fielderInference.ts:77-83 | Spec Â§4 Line Drive: LC="SS, LF/CF (hard to field)" with secondary as LF/CF | Code: LINE_DRIVE_INFERENCE['Left-Center']={primary:'SS', secondary:'CF'} â€” only CF, no LF as tertiary | Add LF as tertiary for Left-Center line drives |
| MIN-B3-009 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Fame | EnhancedInteractiveField.tsx:3607-3608 | Spec: ROBBERY=+1.5 Fame, WEB_GEM=+1.0 Fame | Code: ROBBERY=1.0 baseFame, WEB_GEM=0.75 baseFame (per SPECIAL_EVENTS_SPEC.md v3.3 CRIT-06 fix). DragDrop spec is outdated vs implementation | Update GAMETRACKER_DRAGDROP_SPEC.md Fame values to match SPECIAL_EVENTS_SPEC.md v3.3 |
| MIN-B3-010 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§2.3 | fieldZones.ts:94-199 ZONE_POLYGONS | Spec polygon paths: Z00='M 50,75 L 55,70 L 55,60 L 45,60 L 45,70 Z'. Code polygon paths: Z00='M 44,72 L 50,66 L 56,72 L 56,60 L 50,54 L 44,60 Z' â€” different vertex coords | Both are valid SVG polygons covering the same conceptual zones, but code has refined geometry for better tessellation and gap coverage. All 25 zone polygons differ in coordinates | Update spec polygon paths to match code's refined geometry, or document that code has refined polygons |
| MIN-B3-011 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§5.2 | fieldZones.ts:205-236 ZONE_CENTERS | Spec centers: Z00(50,67), Z01(70,75), Z04(30,75), F05(2,12), F06(50,98) | Code centers: Z00(50,63), Z01(64,64), Z04(36,64), F05(1,14), F06(50,92) â€” adjusted to match revised polygon geometry | Update spec ZONE_CENTERS to match code values |
| MIN-B3-012 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§5.3 | fieldZones.ts:482-487 QUICK_TAP_BUTTONS | Spec: 6 buttons (foul_left, popup, foul_right, hr_left, hr_center, hr_right) | Code: 4 buttons (popup, hr_left, hr_center, hr_right) â€” foul_left and foul_right quick tap buttons removed since foul zones are directly tappable on field | Update spec to match code's 4 buttons or restore foul quick taps |
| MIN-B3-013 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§9.1 | FieldZoneInput.tsx:27-32 FieldZoneInputProps | Spec: onFielderOverride as separate callback prop | Code: fielder passed as second arg to onZoneSelect(data, fielder) â€” no separate onFielderOverride callback. Simpler API | Update spec props to match code's simplified onZoneSelect signature |
| MIN-B4-001 | 4 | FAME_SYSTEM_TRACKING.md Â§Infrastructure | gameStorage.ts:143 fameEvents | Tracking doc says "Fame persistence: Lost on page refresh" | Code: fameEvents saved to IndexedDB in PersistedGameState (gameStorage.ts:143). maxDeficitAway/Home also persisted (line 174-175). Fame IS persisted | Update tracking doc: mark persistence as âœ… COMPLETE |
| MIN-B4-002 | 4 | FAME_SYSTEM_TRACKING.md Â§INC-004 | GameTracker/index.tsx:~1498 | INC-004: "winner={null} hardcoded" in EndGameFameSummary | Tracking doc claims winner prop not set â€” need user to verify if still null in Figma GameTracker | Verify and wire winner prop from game state |
| MIN-B10-001 | 10 | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§2.2 | gameStorage.ts:109-126 | Spec: PlayerGameStats has hitOrder: ('1B'\|'2B'\|'3B'\|'HR')[] for cycle detection | Code: PersistedGameState playerStats has no hitOrder field â€” cycle detection handled elsewhere | Update spec or add hitOrder to PersistedGameState |
| MIN-B10-002 | 10 | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§4.2 | N/A | Spec Â§4.2: IndexedDB schema includes dedicated fameEvents store | No dedicated fameEvents store; fame events stored inline in game state and event log AtBatEvent.fameEvents | Update spec to reflect inline storage approach |
| MIN-B10-003 | 10 | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§5.5 | careerStorage.ts | Spec Â§5.5: Phase 5 (multi-season, career, export) marked PENDING | careerStorage.ts EXISTS with DB_VERSION=3 and career stores (batting/pitching/fielding/milestones) â€” spec is outdated | Update spec: Phase 5 partially implemented (career storage exists) |
| MIN-B10-004 | 10 | STAT_TRACKING_ARCHITECTURE_SPEC.md | seasonStorage.ts:156 | Spec references SMB4 game | seasonStorage has `balks: number` field â€” SMB4 has no balks per SMB4_GAME_MECHANICS.md | Remove balks field from PlayerSeasonPitching |
| MIN-B10-005 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§16 | N/A | Grade history tracking: player.gradeHistory = [{grade, startGame, endGame}] | No grade history tracking exists â€” grades are stored as current value only | Add gradeHistory array to player model (low priority â€” enhancement) |
| MIN-B4-003 | 4 | MOJO_FITNESS_SYSTEM_SPEC.md Â§3.1 | fitnessEngine.ts:163-166 FITNESS_STATES['WELL'] | Spec Â§3.1: WELL value=80% | Code: WELL value=80, but getFitnessStateFromValue() (line 298-305) uses thresholds: JUICEDâ‰¥110, FITâ‰¥90, WELLâ‰¥70, STRAINEDâ‰¥50, WEAK>0. These thresholds mean a value of 80 is WELL (70-89 range), while spec's stated values (JUICED=120, FIT=100, WELL=80, STRAINED=60, WEAK=40) suggest tighter boundaries. The ranges work but boundaries are WIDER than implied by spec values | Document actual ranges in spec: JUICED(â‰¥110), FIT(90-109), WELL(70-89), STRAINED(50-69), WEAK(1-49), HURT(0) |

## GAP Items (Spec Exists, Code Missing)

Features/logic defined in specs but not implemented.

| ID | Batch | Spec | What's Missing | Where It Should Go | Severity | Notes |
|----|-------|------|----------------|-------------------|----------|-------|
| GAP-B1-001 | 1 | BWAR_CALCULATION_SPEC.md Â§9 | Season-end calibration data aggregation pipeline | seasonAggregator.ts or new calibrationService.ts | MAJOR | Functions exist but nothing feeds them data |
| GAP-B1-002 | 1 | BWAR_CALCULATION_SPEC.md Â§9 | Calibration scheduling + blend logic | New calibrationService.ts | MAJOR | Config (blend=0.3, minSeasons=2, minPA=10k) not implemented |
| GAP-B1-003 | 1 | BWAR_CALCULATION_SPEC.md Â§6 | Multi-league adjustment | bwarCalculator.ts calculateBWAR() | MINOR | Placeholder exists, intentionally unused (single-league) |
| GAP-B1-004 | 1 | PWAR_CALCULATION_SPEC.md Â§11 | Pitcher park factor adjustment (applyPitcherParkFactor, getParkAdjustedERA) | pwarCalculator.ts | MAJOR | Spec'd but not implemented â€” same issue as bWAR park factors |
| GAP-B1-005 | 1 | FWAR_CALCULATION_SPEC.md Â§8 | Missed dive zero-penalty handler | fwarCalculator.ts calculateErrorValue() | MINOR | Code reduces penalty with 0.7Ã— but spec says 0.0Ã— for missed dives |
| GAP-B1-006 | 1 | RWAR_CALCULATION_SPEC.md Â§5 | Granular tag-up tracking (2Bâ†’Home vs 3Bâ†’Home) | rwarCalculator.ts calculateUBR() | MINOR | Both get 0.45 so functionally same; just tracking granularity |
| GAP-B1-007 | 1 | RWAR_CALCULATION_SPEC.md Â§8 | RunnerAdvancement detailed schema | rwarCalculator.ts types | MINOR | Spec'd richer schema, code uses simpler approach |
| GAP-B2-001 | 2 | MASTER_BASEBALL_RULES_AND_LOGIC.md Â§7 | Infield fly rule auto-detection logic (R1+R2 or loaded, <2 outs, fair fly) | useGameState.ts or new IFR detector | MINOR | CURRENT_STATE says âœ… but only manual PO recording exists, no auto-detection/prompt |
| GAP-B2-002 | 2 | RUNNER_ADVANCEMENT_RULES.md Â§5 | WildPitchEvent interface with per-runner outcomes + calculateWildPitchDefaults() | runnerDefaults.ts | MINOR | WP/PB advancement handled by manual runner movement modal, no pre-calculated defaults |
| GAP-B2-003 | 2 | INHERITED_RUNNERS_SPEC.md Â§6.1 | inheritedRunnersStranded field â€” spec requires tracking stranded count for escape rate + clutch integration | PitcherGameStats in useGameState.ts | MAJOR | PitcherGameStats has inheritedRunners + inheritedRunnersScored but NO inheritedRunnersStranded â€” cannot calculate escape rate for clutch |
| GAP-B2-004 | 2 | INHERITED_RUNNERS_SPEC.md Â§7.1 | evaluateInheritedRunnerEscape() â€” clutch credit for relievers stranding inherited runners (full=1.0-2.0, partial=0.5, Ã—âˆšLI) | clutchCalculator.ts or new function | MAJOR | No inherited runner escape/choke evaluation anywhere in clutchCalculator â€” no integration between tracker and clutch system |
| GAP-B2-005 | 2 | INHERITED_RUNNERS_SPEC.md Â§6.1 | leverageIndexAtEntry + scoreDifferentialAtEntry fields in PitcherAppearance | PitcherGameStats in useGameState.ts | MINOR | Stats don't capture LI or score diff at pitcher entry â€” needed for reliever evaluation context |
| GAP-B2-006 | 2 | PITCH_COUNT_TRACKING_SPEC.md Â§4.1 | pitchesByInning per-inning breakdown (store both cumulative AND per-inning) | PitcherGameStats in useGameState.ts | MINOR | Only cumulative pitchCount stored â€” no per-inning breakdown for pitch count analysis |
| GAP-B2-007 | 2 | PITCH_COUNT_TRACKING_SPEC.md Â§6.2 | PITCHES_PER_BATTER_ESTIMATE constants + estimatePitchCount() function | New utility or useGameState.ts | MINOR | No pitch count estimation system â€” starter=3.9, K=5.5, walk=5.8, etc. not implemented |
| GAP-B2-008 | 2 | PITCH_COUNT_TRACKING_SPEC.md Â§5.4 | High pitch count alert at 100+ pitches with confirm/correct prompt | GameTracker.tsx or useGameState.ts | MINOR | No automatic alert when pitcher exceeds 100 pitches â€” user must manually track |
| GAP-B2-009 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§6.3-6.4 | Hold/blown save detection logic: enteredInSaveSituation + lead tracking during appearance | calculatePitcherDecisions in useGameState.ts | MAJOR | No hold or blown save calculation â€” fields exist but never populated |
| GAP-B2-010 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§11.1 | Per-game achievement booleans (qualityStart, completeGame, shutout, noHitter, perfectGame, maddux, immaculateInnings[]) | PitcherGameStats in useGameState.ts | MINOR | Achievements computed in aggregators/fame detection but not stored on per-game PitcherGameStats type |
| GAP-B2-011 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§6.2 | leadWhenEntered + enteredInSaveSituation tracking during game | useGameState.ts changePitcher | MINOR | No save-situation tracking at pitcher entry â€” needed for hold/BS detection |
| GAP-B2-012 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§8.2 | Complete game scales with game length (outsRecorded === game.totalOuts) | seasonAggregator.ts:198, GameTracker.tsx:1868 | MINOR | Hardcoded to 27 outs (9-inning games) â€” doesn't scale for 6/7-inning games |
| GAP-B2-013 | 2 | PITCHER_STATS_TRACKING_SPEC.md Â§11.1 | basesReachedViaError field in per-game PitcherGameStats for perfect game detection | useGameState.ts PitcherGameStats interface | MINOR | Field not in useGameState's PitcherGameStats type (exists in aggregator's type) |
| GAP-B3-001 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§7 | Shift tracking system: applyShiftAdjustment() adjusts fielder/manager credit when shift is on (pull-side ground out = +0.2 manager, opposite field hit = -0.3 manager + 0 fielder) | clutchCalculator.ts | MAJOR | shift_on exists as manager decision type (line 837) with success/failure values, but NO applyShiftAdjustment() function, no shift toggle tracking, no direction-based adjustment |
| GAP-B3-002 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§8 | D3K (Dropped Third Strike) attribution: runner_safe gives batter +0.3, pitcher +0.7, catcher -0.5; runner_out gives batter -1.0, pitcher +1.0, catcher -0.1 | clutchCalculator.ts | MINOR | No getD3KAttribution() function. D3K mapped to strikeout_swinging in useClutchCalculations hook (line 111) â€” catcher gets no blame for the drop |
| GAP-B3-003 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§8 | 3 Pickoff Attempts Rule attribution: runner +0.2, pitcher -0.3 when 3rd pickoff forces advance | clutchCalculator.ts | MINOR | No THREE_PICKOFF_RULE handling. Pickoff events exist (pickoff_pitcher, pickoff_catcher) but no 3-attempt auto-advance tracking |
| GAP-B3-004 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§4.6 | Baserunning attributions: TOOTBLAN=-1.2, extra base taken=+0.7, thrown out advancing=-0.8, tag-up scores=+0.4 | clutchCalculator.ts getRunnerBaseValue | MINOR | Only SB(+1.0), CS(-1.0), pickoff(-0.8) implemented. Missing: TOOTBLAN, extra base taken, thrown out advancing, tag-up scores |
| GAP-B3-005 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§6 | Manager decision inference: auto-detect pitching_change, pinch_hitter, pinch_runner, defensive_sub, IBB; prompt for steal/bunt/squeeze/hit-and-run | calculatePlayAttribution or integration layer | MAJOR | Manager attribution exists in calculatePlayAttribution (lines 802-817) and getManagerBaseValue (lines 825-842) with all 11 decision types and values, but NO auto-detection logic â€” depends on caller explicitly providing managerDecision. No prompt system for steal/bunt/squeeze calls |
| GAP-B3-006 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§3 | Zone-based depth integration: getContactQualityFromZoneTap() linking field zone tap to CQ | clutchCalculator.ts or fieldZoneInput module | MINOR | No getContactQualityFromZoneTap(), getCQTrajectoryFromZone(), or getDepthFromZone() functions anywhere in codebase |
| GAP-B3-007 | 3 | CLUTCH_ATTRIBUTION_SPEC.md Â§12 | ManagerDecision record interface: decisionId, gameId, managerId, decisionType, leverageIndex, inferred boolean, outcome, clutchImpact | clutchCalculator.ts | MINOR | No ManagerDecision interface. Manager attribution is part of PlayAttribution but not stored as separate decision records |
| GAP-B3-008 | 3 | LEVERAGE_INDEX_SPEC.md Â§11 | PlateAppearanceContext interface with leverageIndex and clutchValue/chokeValue per PA â€” spec requires LI to be stored per plate appearance | eventLog.ts or gameStorage | MINOR | LI is calculated at use-time but not persisted per PA for historical analysis |
| GAP-B3-009 | 3 | FIELDING_SYSTEM_SPEC.md Â§7 | Foul ball handling: 5 foul territory zones (FL-LINE, FL-HOME, FR-LINE, FR-HOME, FOUL-BACK) with distinct fielder priorities per zone | fielderInference.ts | MAJOR | No foul territory zones in code at all. Direction type only supports 5 fair territory directions. Foul ball putouts cannot be correctly attributed |
| GAP-B3-010 | 3 | FIELDING_SYSTEM_SPEC.md Â§16 | Shift handling: shift types (Standard, Pull, No Shift), shift-adjusted inference probabilities, shift state tracking per AB, user toggle before at-bat | fielderInference.ts + useGameState.ts | MAJOR | No shift logic in inference engine. game.ts FieldingData has shiftActive field but never populated. No UI toggle for shift |
| GAP-B3-011 | 3 | FIELDING_SYSTEM_SPEC.md Â§19 | FieldingPlay record interface: 40+ fields including battedBallType, direction (7-way), depth, playType, errorType, errorContext, assists[], dpRole, shiftActive, nutshotEvent, comebackerInjury, robberyAttempted, robberyFailed, infieldFlyRule, groundRuleDouble, badHopEvent, d3kEvent, outsRecorded | game.ts FieldingData (partial), fieldingStatsAggregator.ts FieldingPlay (simplified) | MAJOR | game.ts FieldingData covers ~70% of fields. fieldingStatsAggregator.ts FieldingPlay only has 9 fields (stripped down). Neither match spec's complete interface. Missing: battedBallType on FieldingData, direction (7-way vs 5-way), depth as required field, grdWallSection, badHopExpectedResult |
| GAP-B3-012 | 3 | FIELDING_SYSTEM_SPEC.md Â§19 | PlayerFieldingStats aggregated interface: 40+ stat fields per position including doublePlaysStarted/Turned/Completed, star play counts (diving/leaping/wall/running/sliding/overShoulder), outfieldAssistsToSecond/Third/Home, errorBreakdown (fielding/throwing/mental), catcher-specific (strikeoutPutouts, passedBalls) | fieldingStatsAggregator.ts PlayerFieldingProfile | MINOR | fieldingStatsAggregator has simplified PlayerFieldingProfile with gamesPlayed, innings, putouts, assists, errors, totalChances, fieldingPct. Missing all star play counts, DP role breakdown, error type breakdown, OFA target breakdown, catcher-specific stats |
| GAP-B3-013 | 3 | FIELDING_SYSTEM_SPEC.md Â§17 | Adaptive learning algorithm: updateInferenceProbabilities with nâ‰¥20 sample threshold, 70%/30% blend (historical/default) | adaptiveLearningIntegration.ts:289-339 | MINOR | IMPLEMENTED in adaptiveLearningIntegration.ts with matching 70/30 blend and nâ‰¥20 threshold. However, spec says update is zone-based (type+direction) and code implements it as zone-based too â€” MATCH. But code stores in localStorage, spec doesn't specify storage location |
| GAP-B3-014 | 3 | FIELDING_SYSTEM_SPEC.md Â§14 | Infield fly rule auto-detection: when PO/FO + R1+R2 or loaded + <2 outs â†’ prompt "IFR called?" | GameTracker UI or useGameState | MINOR | game.ts FieldingData has infieldFlyRule boolean + ifrBallCaught field. Test file exists (infieldFlyRule.test.ts, 474 lines). But NO auto-detection/prompt wiring in GameTracker â€” user must manually set IFR flag |
| GAP-B3-015 | 3 | FIELDING_SYSTEM_SPEC.md Â§15 | Ground rule double tracking: separate from regular 2B with fielderChasing, bounceLocation, wallSection for park factor analysis | GameTracker UI or useGameState | MINOR | game.ts FieldingData has groundRuleDouble boolean but no fielderChasing/bounceLocation/wallSection fields. No UI toggle to mark 2B as ground rule |
| GAP-B3-016 | 3 | FIELDING_SYSTEM_SPEC.md Â§13 | Bad hop event tracking: toggle on any hit, with fielderAffected, expectedResult, actualResult, notes | GameTracker UI | MINOR | game.ts FieldingData has badHopEvent boolean but no badHopExpectedResult field (listed in spec Â§19 FieldingPlay but missing from FieldingData). No UI toggle |
| GAP-B3-017 | 3 | FIELDING_SYSTEM_SPEC.md Â§13 | Failed HR robbery tracking: when HR + robberyAttempted + robberyFailed â†’ -1 Fame | GameTracker UI | MINOR | game.ts FieldingData has robberyAttempted/robberyFailed booleans. StarPlaySubtypePopup.tsx exists. But no automated prompt "Was there an attempted robbery?" on HR result |
| GAP-B3-018 | 3 | FIELDING_SYSTEM_SPEC.md Â§18 | Contextual UI: show toggles only when relevant (IFRâ†’PO+runners+<2outs, GRDâ†’2B, BadHopâ†’hit, Nutshotâ†’Center+BIP, Robberyâ†’HR) | GameTracker.tsx | MINOR | No contextual toggle system â€” fielding data fields exist but no conditional UI rendering based on play context |
| GAP-B3-019 | 3 | FIELDING_SYSTEM_SPEC.md Â§6 | D3K field handler selection: "Who fielded?" â†’ [Catcher] [Pitcher] [3B] with Catcher default | GameTracker.tsx D3K flow | MINOR | D3K outcome tracking (OUT/WP/PB/E_CATCHER/E_1B) exists in game.ts but no "who fielded?" selector for the D3K scenario â€” always assumes Catcher |
| GAP-B3-020 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Pattern 2 | Batter drag past fence (y>1.0) for HR entry: spec says "Drag batter beyond the wall" triggers HR recording | EnhancedInteractiveField.tsx | MINOR | HR button method exists; batter drag-to-stands HR entry exists (drag batter to stands area). IMPLEMENTED â€” verified batter drag to stands records HR |
| GAP-B3-021 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Pattern 9 | Error entry via long-press/double-tap fielder to enter error mode | EnhancedInteractiveField.tsx | MINOR | FielderIcon has isErrorMode prop but no long-press gesture to trigger it. Error entry handled through play classifier result rather than fielder interaction |
| GAP-B3-022 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Pattern 2 | HR distance text input: "Distance (ft)?" after HR entry | EnhancedInteractiveField.tsx or GameTracker.tsx | MINOR | HR distance tracking mentioned in spec but no distance input UI component found. SMB4 shows exact feet, not captured |
| GAP-B3-023 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Substitution | Double switch: make pitching change + drag bench player to lineup slot in single combined move | GameTracker.tsx substitution flow | MINOR | Pitching change and position player subs are separate flows. No combined double-switch UX as described in spec |
| GAP-B3-024 | 3 | GAMETRACKER_DRAGDROP_SPEC.md Â§Undo | Undo button "Shows remaining undos: â†© 3" with 5-step stack | UndoSystem.tsx | MINOR | UndoSystem.tsx EXISTS with GameSnapshot type, maxSteps=5, toast notification. Component fully built but integration with GameTracker state unclear â€” need to verify it's wired in |
| GAP-B3-025 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§6 | Zone-to-CQ integration: getCQTrajectoryFromZone() maps zone depth to CQ inference params (fly ball: infieldâ†’shallow, mediumâ†’medium, deepâ†’deep; ground ball: infieldâ†’medium speed, outfieldâ†’hard speed); getContactQualityFromZone() bridges to clutchCalculator; getFoulContactQuality() with per-zone CQ table (F06=0.15, F02/F03=0.20, F01/F04=0.35, F00/F05=0.50) | fieldZones.ts or new zoneCQ.ts | MAJOR | Entire CQ integration layer is unimplemented â€” zone taps capture location but CQ is derived only from exit type, ignoring zone depth |
| GAP-B3-026 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§8 | Spray chart generation: generateSprayPoint(zoneId, Â±3 jitter), createSprayChartEntry(zoneId, batterHand, result, exitType), SPRAY_COLORS (HR=red, triple=orange, double=yellow, single=green, out=gray, error=purple), SPRAY_SIZES (HR=12, triple=10, down to out=6) | fieldZones.ts or new sprayChart.ts | MAJOR | No spray chart generation from zone taps. Zone data captured but never converted to spray chart visualization points |
| GAP-B3-027 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§8.2 | Stadium spray chart integration: createStadiumBattedBallEvent(), mapToStadiumSprayZone() (25-zoneâ†’7 spray zones), estimateDistance() for HR zones (Z13=330ft, Z14=375ft, Z15=400ft, Z16=375ft, Z17=340ft Â±30ft random), recordBattedBallToStadium() | stadiumAnalytics.ts or new stadiumSpray.ts | MAJOR | No zone-to-stadium analytics pipeline. mapToStadiumSprayZone mapping table and estimateDistance constants not implemented anywhere |
| GAP-B3-028 | 3 | FIELD_ZONE_INPUT_SPEC.md Â§9.4 | recordBattedBall() integration: combines zone data + CQ from zone + spray point + fielder into play data record | useGameState.ts or FieldingModal integration | MINOR | FieldingModal handleZoneSelect maps zone depth to FieldingModal DepthType but does NOT call getContactQualityFromZone() or generateSprayPoint() â€” only partial integration |
| GAP-B4-001 | 4 | MOJO_FITNESS_SYSTEM_SPEC.md Â§6.2 | recordPAWithContext() â€” per-PA Mojo/Fitness snapshot recording + split accumulation. Spec: store batterMojo, batterFitness, pitcherMojo, pitcherFitness with each PA, then call updateBattingSplits/updatePitchingSplits | mojoEngine.ts or useGameState.ts | MAJOR | Data structure exists (MojoSplitStats, PlayerMojoSplits) but NO accumulation function. No recordPAWithContext(), updateBattingSplits(), or updatePitchingSplits(). Splits are defined but never populated |
| GAP-B4-002 | 4 | MOJO_FITNESS_SYSTEM_SPEC.md Â§6.1 | Mojo-at-each-PA tracking: spec Â§6.1 table says "Mojo at each PA" captured "Every plate appearance" in "Per-event record" | useGameState.ts PA recording | MINOR | PA events are recorded but Mojo state at time of PA is not stamped onto the event record. Cannot retrospectively analyze performance-by-Mojo |
| GAP-B4-003 | 4 | MOJO_FITNESS_SYSTEM_SPEC.md Â§7.1 | Team page Mojo/Fitness editor: between-game management screen with filter, dropdown editors per player, Apply Recovery / Simulate Rest Day / Reset All to Normal buttons | FranchiseHome or TeamManagement page | MINOR | No between-game Mojo/Fitness management UI. In-game tracking exists in GameTracker but no between-game editor for team-wide updates |
| GAP-B4-004 | 4 | MOJO_FITNESS_SYSTEM_SPEC.md Â§9.3 | Combined player card UI showing Mojo bar + Fitness badge + Juiced warning + stat lines | PlayerCard component | MINOR | PlayerCard.tsx imports MojoLevel/FitnessState and MOJO_STATES/FITNESS_STATES. Some display exists but not the full combined card layout from spec Â§9.3 with bars, badges, and Juiced warning inline |
| GAP-B4-005 | 4 | GRADE_ALGORITHM_SPEC.md Â§Complete Implementation | POSITION_PLAYER_GRADE_THRESHOLDS, PITCHER_GRADE_THRESHOLDS as production constants â€” no engine file exists | New gradeEngine.ts | MAJOR | Spec provides full implementation code but no engine file was created. All grade logic is either in test helper or hardcoded |
| GAP-B4-006 | 4 | GRADE_ALGORITHM_SPEC.md Â§Two-Way Players | Two-way player valuation: (posRating + pitchRating) Ã— 1.25 premium | gradeEngine.ts | MAJOR | No two-way player support anywhere in grade or salary system |
| GAP-B4-007 | 4 | GRADE_ALGORITHM_SPEC.md Â§Prospect Generation | generateProspectRatings() with POSITION_STAT_BIAS, weighted target, clamp 15-85, grade verification + adjustment | gradeEngine.ts or draftEngine.ts | MAJOR | LeagueBuilderDraft.tsx uses random grade from flat array, no weighted rating calculation, no position-specific stat distribution |
| GAP-B4-008 | 4 | GRADE_ALGORITHM_SPEC.md Â§Prospect Generation | generateProspectGrade(round) round-based probability distributions per draft round | gradeEngine.ts or draftEngine.ts | MAJOR | No round-based probability distribution. Code picks random index from GRADES array uniformly |
| GAP-B4-009 | 4 | GRADE_ALGORITHM_SPEC.md Â§Prospect Generation | generatePotentialCeiling(currentGrade) with grade-specific ceiling probability tables | gradeEngine.ts or draftEngine.ts | MAJOR | LeagueBuilderDraft.tsx ceiling = GRADES[max(0, gradeIdx - random*3)] â€” very rough approximation, not matching spec's per-grade probability distributions |
| GAP-B4-010 | 4 | GRADE_ALGORITHM_SPEC.md Â§Pitcher Prospect Generation | generatePitcherProspectRatings() with SP/RP/CP bias (SP: +5ACC, CP: +8VEL/+5JNK/-13ACC, RP: style roll) + generateArsenal(junk) | gradeEngine.ts or draftEngine.ts | MAJOR | No pitcher prospect generation. DraftFlow.tsx has hardcoded pitcher prospects; LeagueBuilderDraft.tsx generates all prospects with position player logic |
| GAP-B4-011 | 4 | GRADE_ALGORITHM_SPEC.md Â§Prospect Generation | PROSPECT_TRAIT_POOL (12 positive traits) + generateProspectTraits(grade) with grade-based trait chance (B:40%, B-:30%, others:20%) | gradeEngine.ts or draftEngine.ts | MINOR | No trait generation for prospects. DraftFlow.tsx has personality field but not traits from the PROSPECT_TRAIT_POOL |
| GAP-B4-012 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Core Calculation | detectFanFavorite(team, seasonStats, leagueContext) â€” highest positive Value Delta on team + generateFanFavoriteReason() | New fanFavoriteEngine.ts | MAJOR | ENTIRELY UNIMPLEMENTED. calculateTrueValue() returns valueDelta in salaryCalculator.ts but no detectFanFavorite() wrapper exists. No per-team detection, no one-per-team enforcement |
| GAP-B4-013 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Albatross Detection | detectAlbatross(team, seasonStats, leagueContext) â€” most negative Value Delta, min salary â‰¥2Ã— league minimum, threshold â‰¥25% underperformance | New fanFavoriteEngine.ts | MAJOR | ENTIRELY UNIMPLEMENTED. No Albatross detection logic, no minimum salary filter, no underperformance threshold |
| GAP-B4-014 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Detection Timing | getMinGamesForQualification(): 10% of season, min 3 games + DETECTION_TRIGGERS (GAME_END, TRADE_COMPLETED, PLAYER_INJURED) | fanFavoriteEngine.ts | MAJOR | No qualification threshold calculation. No detection trigger system |
| GAP-B4-015 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Fan Morale Impact | IN_SEASON_HAPPINESS_EFFECTS: FF_BIG_GAME+0.75, FF_CLUTCH+1.0, FF_WALKOFF+2.0, ALB_CLUTCH_FAILURE-0.75, ALB_ERROR-1.0, ALB_BENCHED-0.5. Season scaling Ã—0.5/1.0/1.25/1.5 | fanMoraleEngine.ts integration | MAJOR | fanMoraleEngine exists (1300+ lines) but has NO Fan Favorite/Albatross event processing. No special happiness effects for these designations |
| GAP-B4-016 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Roster Transactions | TRANSACTION_HAPPINESS_EFFECTS: TRADED_FF=-15, RELEASED_FF=-20, FF_RETIRES=-5, FF_FA_LOSS=-10, TRADED_ALB=+10, RELEASED_ALB=+15, ALB_RETIRES=+5, ALB_FA_LOSS=+8 | fanMoraleEngine.ts integration | MAJOR | No roster transaction happiness effects for Fan Favorite/Albatross |
| GAP-B4-017 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Trade Value | Trade value modifier: Fan Favorite Ã—1.15 premium, Albatross Ã—0.70 discount | tradeEngine or salaryCalculator.ts | MAJOR | No trade value adjustment for Fan Favorite/Albatross status |
| GAP-B4-018 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Contract Negotiation | Free agency demand: FF +15% with 10% loyalty discount for re-sign, Albatross -10% with no loyalty | offseason free agency flow | MAJOR | No contract negotiation modifiers for designations |
| GAP-B4-019 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Narrative | FAN_FAVORITE_HEADLINES with 4 event categories Ã— 3 templates each + generateFanFavoriteHeadline() | narrativeEngine.ts integration | MAJOR | narrativeEngine exists but has no Fan Favorite/Albatross headline templates or generation |
| GAP-B4-020 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Fame Events | FAN_FAVORITE_FAME_EVENTS: FF_NAMED=+2, ALB_NAMED=-1, FF_CLUTCH=+1.5, ALB_FAILURE=-1.5 | types/game.ts FameEventType | MAJOR | These 4 Fame event types NOT in FameEventType enum (154 entries, none for Fan Favorite/Albatross) |
| GAP-B4-021 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§End of Season | processEndOfSeasonFanFavorite() â€” lock designations, award Fame, record in player history, carry over until 10% of next season | season end processing flow | MAJOR | No end-of-season Fan Favorite processing |
| GAP-B4-022 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§UI Display | Value Delta color coding (green-bright/green/gray/orange/red), roster view integration with superscript delta values, FF â­ and Albatross ðŸ’€ badges | Roster view components | MAJOR | No Fan Favorite/Albatross UI display. No value delta color coding |
| GAP-B4-023 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§UI Display | Dynamic "Projected" status (dotted border badge) updates after every game vs "Season-locked" (solid border) at season end | Roster view or player card | MAJOR | No projected vs locked designation display |
| GAP-B4-024 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Key Principles | Season carryover: FF and Albatross persist into next season until 10% mark when new projections begin | Season transition logic | MAJOR | No cross-season carryover mechanism for designations |
| GAP-B4-025 | 4 | FAN_FAVORITE_SYSTEM_SPEC.md Â§Albatross Detection | generateAlbatrossReason() with 3 severity tiers (â‰¥75% under, â‰¥50% under, default) | fanFavoriteEngine.ts | MAJOR | No Albatross reason generation |
| GAP-B5-001 | 5 | FRANCHISE_MODE_SPEC.md Â§4 | FranchiseManager API: createFranchise, loadFranchise, deleteFranchise, renameFranchise, listFranchises, exportFranchise, importFranchise, getActiveFranchise, setActiveFranchise | New franchiseManager.ts | MAJOR | PLANNING SPEC â€” No FranchiseManager implementation. franchiseStorage.ts is a stub (all functions return null) |
| GAP-B5-002 | 5 | FRANCHISE_MODE_SPEC.md Â§2.2 | Separate IndexedDB per franchise: kbl-franchise-{id}/ with independent stores per franchise + kbl-app-meta/ for shared data | Storage architecture | MAJOR | Single DB used for entire app. No per-franchise isolation. No kbl-app-meta DB |
| GAP-B5-003 | 5 | FRANCHISE_MODE_SPEC.md Â§6.2 | Franchise switching: close DB, clear state, open new DB, integrity check, load state | App navigation | MAJOR | No franchise switching mechanism. FranchiseHome is a page within single app context |
| GAP-B5-004 | 5 | FRANCHISE_MODE_SPEC.md Â§7 | Migration: detect legacy data, create "Default Franchise", auto-migrate, schema version per franchise | Migration logic | MAJOR | No migration path. No schema versioning per franchise |
| GAP-B5-005 | 5 | FRANCHISE_MODE_SPEC.md Â§4.1 | Export/Import: exportFranchise() â†’ Blob, importFranchise(Blob) â†’ FranchiseId | franchiseManager.ts | MAJOR | No export/import functionality |
| GAP-B5-006 | 5 | FRANCHISE_MODE_SPEC.md Â§5 | Franchise Selector UI: startup screen with franchise cards (name, season count, storage, last played), New Franchise button, actions menu (Continue/Rename/Export/Delete) | New FranchiseSelector page | MAJOR | No franchise selector. App opens directly to navigation |
| GAP-B5-007 | 5 | FRANCHISE_MODE_SPEC.md Â§5.3 | In-game franchise indicator: small header showing active franchise name | GameTracker header | MAJOR | No franchise name indicator in game UI |
| GAP-B5-008 | 5 | FRANCHISE_MODE_SPEC.md Â§3 | Storage monitoring: show usage per franchise, track storageUsedBytes in FranchiseSummary | franchiseManager.ts | MAJOR | No storage usage tracking per franchise |
| GAP-B10-001 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§15/Â§24 | Oddity Records system: 19 record types (Shortest Homer, Slowest Triple, etc.) with OddityRecordCandidate interface, GameOddityState tracking, play-by-play/end-of-game/season-end checks | New oddityRecordTracker.ts + museumStorage | MAJOR | Zero implementation. No OddityRecord types, no tracking functions, no storage |
| GAP-B10-002 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§26 | Nickname system: 16 auto-nickname triggers (Mr. October, The Ace, The Machine, etc.) with checkForNickname(), user override, earned-season tracking | New nicknameEngine.ts + player model | MAJOR | Zero implementation. Player model has no nickname field beyond leagueBuilder |
| GAP-B10-003 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§25 | In-season Trade system: trade execution, stat splits (byTeam array), trade deadline at 65% season, salary matching, trade history, WAR attribution per team stint | New tradeEngine.ts + seasonStorage update | MAJOR | Zero implementation. No trade execution, no stat splits, no trade deadline prompt |
| GAP-B10-004 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§25/Â§26 | Revenge game tracking: formerTeams array, revengeGames array, firstMeetingPlayed flag, performance tracking vs former team, 3-season duration | Player model + gameTracker integration | MAJOR | Zero implementation. No formerTeams, revengeGames, or revenge-game detection |
| GAP-B10-005 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§24 | Award Emblems system: AWARD_EMBLEMS const (16 types), getPlayerEmblems() function, priority ordering, count display (e.g., "â­(3)"), display in 4 locations (GameTracker, roster, player card, museum) | New awardEmblems.ts + player model | MAJOR | Zero implementation. No emblem constants, display functions, or UI integration |
| GAP-B10-006 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§6 | HOF Score calculation: calculateHOFScore() with WARÃ—1.5 + MVPÃ—15 + CYÃ—15 + ASÃ—3 + GGÃ—2 + champÃ—5. Entry criteria: WARâ‰¥50 OR MVPâ‰¥1 OR ASâ‰¥5 OR override | museumStorage or new hofEngine.ts | MAJOR | Zero implementation. Museum storage exists but no induction logic |
| GAP-B10-007 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§19 | Legacy status tracking: CORNERSTONE, FRANCHISE_ICON, LEGEND statuses. Dynasty tracking: CONTENDER, MINI_DYNASTY, DYNASTY. Team history with per-team WAR accumulation | Player/Team models | MINOR | Partial â€” TeamMVP/cornerstone exist but no legacy status levels or dynasty detection |
| GAP-B10-008 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§26 | Fictional Calendar system: SEASON_CALENDAR const, getGameDate() mapping game# to calendar date, special dates (Opening Day, Trade Deadline, etc.) | New calendarEngine.ts | MINOR | Zero implementation. Games use game numbers only, no fictional dates |
| GAP-B10-009 | 10 | KBL_XHD_TRACKER_MASTER_SPEC_v3.md Â§26 | Headlines Generator: HEADLINE_TEMPLATES (3 categories: PREGAME, POSTGAME, SEASON), generatePregameHeadlines(), generatePostgameHeadline() with priority ordering | narrativeEngine or new headlineEngine.ts | MINOR | narrativeEngine has generateNarrative() for game recaps but NOT the pre/post-game headline template system described in master spec |

## Undocumented Code (Code Exists, No Spec)

Code behavior not described in any spec. Not bugs â€” needs documentation or spec update.

| ID | Batch | File:Line | What It Does | Suggested Spec Location |
|----|-------|-----------|--------------|------------------------|
| UNDOC-B1-001 | 1 | bwarCalculator.ts:109-113 | Switch hitter (S) park factor: averages L and R handedness factors | BWAR_CALCULATION_SPEC.md Â§6 |
| UNDOC-B1-002 | 1 | bwarCalculator.ts:277-288 | Batch bWAR calculation for multiple players | BWAR_CALCULATION_SPEC.md (new section) |
| UNDOC-B1-003 | 1 | bwarCalculator.ts:371-389 | Display helpers: formatWOBA, formatWAR, formatRuns | BWAR_CALCULATION_SPEC.md (new appendix) |
| UNDOC-B1-004 | 1 | bwarCalculator.ts:228 | Default homePA to 50% of PA when not tracked | BWAR_CALCULATION_SPEC.md Â§6 |
| UNDOC-B1-005 | 1 | pwarCalculator.ts:244 | Hold-rate based LI estimation (holdRate > 0.3 â†’ 1.3) extends spec's saves-only approach | PWAR_CALCULATION_SPEC.md Â§11 |
| UNDOC-B1-006 | 1 | pwarCalculator.ts:466-478 | IP formatting/parsing (formatIP, parseIP) | PWAR_CALCULATION_SPEC.md (new appendix) |
| UNDOC-B1-007 | 1 | fwarCalculator.ts:82 | `charging` difficulty multiplier (1.3) not in spec | FWAR_CALCULATION_SPEC.md Â§7 |
| UNDOC-B1-008 | 1 | fwarCalculator.ts:51 | `missed_catch` error type (-0.18) not in spec | FWAR_CALCULATION_SPEC.md Â§8 |
| UNDOC-B1-009 | 1 | fwarCalculator.ts:461-509 | Simplified fWAR from counting stats (calculateFWARFromStats) | FWAR_CALCULATION_SPEC.md (new section) |
| UNDOC-B1-010 | 1 | fwarCalculator.ts:556-665 | Persistence adapter: maps eventLog.ts events â†’ calculator events | FWAR_CALCULATION_SPEC.md (new section) |
| UNDOC-B1-011 | 1 | fwarCalculator.ts:518-528 | Position-adjusted fWAR tier classification (getFWARTier) | FWAR_CALCULATION_SPEC.md Â§6 |
| UNDOC-B1-012 | 1 | rwarCalculator.ts:211-220 | Simplified wSB without league stats (assumes lg avg = 0) | RWAR_CALCULATION_SPEC.md (new section) |
| UNDOC-B1-013 | 1 | rwarCalculator.ts:308-314 | Simplified wGDP using standard 12% GIDP rate | RWAR_CALCULATION_SPEC.md (new section) |
| UNDOC-B1-014 | 1 | rwarCalculator.ts:404-425 | Scalable default league stats generator (createDefaultLeagueStats) | RWAR_CALCULATION_SPEC.md Â§9 |
| UNDOC-B1-015 | 1 | rwarCalculator.ts:434-441 | rWAR quality tier classification (getRWARTier) | RWAR_CALCULATION_SPEC.md Â§11 |
| UNDOC-B1-016 | 1 | rwarCalculator.ts:446-456 | SB efficiency utilities (getSBSuccessRate, isSBProfitable) | RWAR_CALCULATION_SPEC.md Â§4 |
| UNDOC-B1-017 | 1 | rwarCalculator.ts:462-474 | Speedâ†’rWAR range estimator (estimateRWARFromSpeed) | RWAR_CALCULATION_SPEC.md Â§11 |
| UNDOC-B1-018 | 1 | mwarCalculator.ts:223 | shift_off as separate decision type with values (+0.1/-0.1) â€” spec mentions shift toggle but doesn't explicitly define shift_off values | MWAR_CALCULATION_SPEC.md Â§5 |
| UNDOC-B1-019 | 1 | mwarCalculator.ts:245-258 | EXPECTED_SUCCESS_RATES constant with exact rates per decision type (e.g., pitching_change=0.575, steal_call=0.675) â€” spec Â§10 gives ranges only | MWAR_CALCULATION_SPEC.md Â§10 |
| UNDOC-B1-020 | 1 | mwarIntegration.ts:143-181 | ManagerMomentState interface + checkManagerMoment() â€” full Manager Moment prompt system with inferRelevantDecisionType/buildManagerMomentContext/getSuggestedAction | MWAR_CALCULATION_SPEC.md (new section) |
| UNDOC-B1-021 | 1 | mwarIntegration.ts:320-338 | getLITierDescription/getLIColor â€” UI display helpers for LI tiers with color coding | MWAR_CALCULATION_SPEC.md (new appendix) |
| UNDOC-B1-022 | 1 | mwarCalculator.ts:921-931 | getMWARColor â€” hex color mapping for mWAR ratings (Elite=gold, Poor=red, etc.) | MWAR_CALCULATION_SPEC.md (new appendix) |
| UNDOC-B1-023 | 1 | mwarCalculator.ts:913-916 | formatMWAR â€” display formatting with +/- sign prefix | MWAR_CALCULATION_SPEC.md (new appendix) |
| UNDOC-B2-001 | 2 | useGameState.ts:473-510 | autoCorrectResult() â€” GOâ†’DP auto-correction more aggressive than spec ("suggest SAC" says spec, code auto-corrects GOâ†’DP when runner thrown out) | MASTER_BASEBALL_RULES_AND_LOGIC.md Â§12 |
| UNDOC-B2-002 | 2 | useGameState.ts:517-531 | isExtraAdvancement() â€” detects when runner advancement exceeds standard for result type, triggers explanation prompt | MASTER_BASEBALL_RULES_AND_LOGIC.md Â§12 (new section) |
| UNDOC-B2-003 | 2 | useGameState.ts:1992-1994 | Error recording marks runs as unearned via inherited runner tracker â€” spec doesn't detail earned/unearned attribution logic | MASTER_BASEBALL_RULES_AND_LOGIC.md Â§8 (new section) |
| UNDOC-B2-004 | 2 | runnerDefaults.ts:303-313 | calculateFoulOutDefaults() â€” foul out as distinct category not in spec | RUNNER_ADVANCEMENT_RULES.md (new section) |
| UNDOC-B2-005 | 2 | runnerDefaults.ts:426 | TBL (TOOTBLAN) as runner event type alongside SB/CS/PK â€” not defined in advancement rules | RUNNER_ADVANCEMENT_RULES.md Â§6 |
| UNDOC-B2-006 | 2 | runnerDefaults.ts:361-387 | calculateFieldersChoiceDefaults(bases, runnerOut) â€” separate FC defaults with per-runner-out parameter | RUNNER_ADVANCEMENT_RULES.md Â§4 |
| UNDOC-B2-007 | 2 | inheritedRunnerTracker.ts:449-490 | getERSummary() â€” aggregates ER/UER per pitcher from runner tracking state | INHERITED_RUNNERS_SPEC.md Â§5 (partially covered in spec as pseudocode but not formalized) |
| UNDOC-B2-008 | 2 | inheritedRunnerTracker.ts:495-528 | getCurrentBases() â€” converts TrackedRunner[] to Bases UI type with inheritedFrom info | INHERITED_RUNNERS_SPEC.md Â§10 (UI display helpers) |
| UNDOC-B2-009 | 2 | useGameState.ts:669-694 | processTrackerScoredEvents() â€” bridges inheritedRunnerTracker scored events to pitcherStats Map | INHERITED_RUNNERS_SPEC.md (new section: integration layer) |
| UNDOC-B2-010 | 2 | useGameState.ts:2908 | End-of-game pitch count prompt only captures CURRENT pitcher, not all pitchers. Comment: "(simplified - full spec requires all pitchers)" | PITCH_COUNT_TRACKING_SPEC.md Â§5.3 (partial implementation) |
| UNDOC-B2-011 | 2 | GameTracker.tsx:3546-3553 | dismissPitchCountPrompt allows Cancel on "required" pitch count prompts â€” Cancel closes modal and pitch change doesn't execute, but user can re-initiate | PITCH_COUNT_TRACKING_SPEC.md Â§5.1 (Cancel behavior not spec'd) |
| UNDOC-B2-012 | 2 | useGameState.ts:105,1217-1219 | consecutiveHRsAllowed field â€” tracks back-to-back HR streaks, reset on non-HR hit or out | PITCHER_STATS_TRACKING_SPEC.md (new section: streak tracking) |
| UNDOC-B2-013 | 2 | useGameState.ts:103,1700-1702 | basesLoadedWalks field â€” counts BB/HBP/IBB with bases loaded | PITCHER_STATS_TRACKING_SPEC.md Â§2 (new stat) |
| UNDOC-B2-014 | 2 | useGameState.ts:723-725 | Loss determination uses "highest runsAllowed" simplification (comment acknowledges spec wants pitcher-of-record) | PITCHER_STATS_TRACKING_SPEC.md Â§5.3 (document as known simplification) |
| UNDOC-B3-001 | 3 | useClutchCalculations.ts:237 | Walk-off bonus applies Ã—1.5 multiplier to clutchValue â€” spec doesn't define a walkoff multiplier in accumulateClutchEvent; spec uses clutch trigger stacking instead | CLUTCH_ATTRIBUTION_SPEC.md Â§9.5 (walkoff is a trigger category, not a flat multiplier) |
| UNDOC-B3-002 | 3 | clutchCalculator.ts:1001-1035 | getClutchVotingComponent() and scaleToRange() â€” All-Star voting integration with 30% weight. Spec documents this in Â§10 but it's an integration point not obvious from the main clutch spec | CLUTCH_ATTRIBUTION_SPEC.md Â§10 (already documented â€” verified match) |
| UNDOC-B3-003 | 3 | useClutchCalculations.ts:105 | TP (Triple Play) mapped to 'gidp' for clutch purposes â€” no separate triple play attribution in spec | CLUTCH_ATTRIBUTION_SPEC.md Â§4.5 (add TP row or document mapping) |
| UNDOC-B3-004 | 3 | leverageCalculator.ts:232-234 | Extra innings ramp-up: `Math.min(2.5, 1.8 + (inning - totalInnings) * 0.15)` â€” spec doesn't define extra-inning multiplier scaling, only shows standard 9-inning multipliers | LEVERAGE_INDEX_SPEC.md Â§6 (add extra innings section) |
| UNDOC-B3-005 | 3 | leverageCalculator.ts:185-191 | decodeBaseState() â€” converts base state int back to RunnersOnBase object. Utility not in spec | LEVERAGE_INDEX_SPEC.md Â§3 (minor utility) |
| UNDOC-B3-006 | 3 | leverageCalculator.ts:522-561 | estimateWinProbability() â€” simplified WP calculation using score diff, game progress, runner boost. Not in LI spec | LEVERAGE_INDEX_SPEC.md (new section or separate WP spec) |
| UNDOC-B3-007 | 3 | leverageCalculator.ts:440-472 | estimateGmLI() â€” role-based gmLI estimation with save/hold adjustments. CLOSER ranges 1.75-1.95, SETUP 1.40-1.60 | LEVERAGE_INDEX_SPEC.md Â§9 (partially covered but exact values undocumented) |
| UNDOC-B3-008 | 3 | leverageCalculator.ts:370-421 | LIAccumulator interface + createLIAccumulator + addLIAppearance + calculateGmLI â€” per-player LI tracking system | LEVERAGE_INDEX_SPEC.md Â§9 (accumulation mentioned but interface not detailed) |
| UNDOC-B3-009 | 3 | leverageCalculator.ts:570-596 | formatLI(), getLIColor(), getLIEmoji() â€” UI display utilities for LI values | LEVERAGE_INDEX_SPEC.md (new appendix: display helpers) |
| UNDOC-B3-010 | 3 | fielderInference.ts:131-137 | inferDirectionFromX(x) â€” maps raw x-coordinate to 5-zone direction (0.25/0.4/0.6/0.75 thresholds). Spec only defines sector-to-direction mapping, not raw coordinate mapping | FIELDING_SYSTEM_SPEC.md Â§3 (add x-coordinate thresholds) |
| UNDOC-B3-011 | 3 | fielderInference.ts:171-201 | inferExitTypeFromLocation(y, isOut) â€” depth-based exit type inference. For outs: <0.35=LineDrive, <0.55=LineDrive, else=FlyBall. For hits: <0.35=Ground, <0.55=LineDrive, else=FlyBall | FIELDING_SYSTEM_SPEC.md Â§3 (add y-coordinate â†’ exit type mapping) |
| UNDOC-B3-012 | 3 | fielderInference.ts:210-237 | inferPlayDifficulty(location, inferredFielder, actualFielder) â€” depth-based difficulty: OF at wall(>0.95)=impossible, warning(>0.85)=difficult, normal(>0.7)=likely, shallow(>0.5)=routine, very-shallow=difficult. IF: <0.15=routine, <0.25=likely, <0.35=difficult, else=impossible | FIELDING_SYSTEM_SPEC.md Â§12 (add difficulty inference thresholds) |
| UNDOC-B3-013 | 3 | fielderInference.ts:293-300 | Confidence adjustment for edge locations: y>0.9 or y<0.1 â†’ Ã—0.8 confidence; x<0.1 or x>0.9 â†’ Ã—0.85 confidence (foul line area) | FIELDING_SYSTEM_SPEC.md Â§4 (add confidence modifiers) |
| UNDOC-B3-014 | 3 | FieldCanvas.tsx:366-388 | Field-feet coordinate system with trigonometric field geometry. Fielder positions computed from real baseball feet coords via fieldToNormalized() rather than spec's simple (0-1) grid | GAMETRACKER_DRAGDROP_SPEC.md Â§Coordinate (update to reference FieldCanvas geometry) |
| UNDOC-B3-015 | 3 | EnhancedInteractiveField.tsx:329-423 | Full inferContextualButtons() system with PlayContext interface, SpecialEventType enum, auto-dismiss timeout (3000ms), emoji mapping, Fame event integration | GAMETRACKER_DRAGDROP_SPEC.md Â§Contextual Buttons (already documented but implementation details like PlayContext interface not in spec) |
| UNDOC-B3-016 | 3 | playClassifier.ts:158 | playClassifier uses isFoulTerritory() from FieldCanvas to auto-classify foul outs when fielder dragged to foul territory â€” exactly matches spec Pattern 5 | GAMETRACKER_DRAGDROP_SPEC.md Â§Pattern 5 (verified match â€” auto-detection working) |
| UNDOC-B3-017 | 3 | EnhancedInteractiveField.tsx:3554-3561 | KILLED_PITCHER and NUT_SHOT are mutually exclusive â€” if KILLED completed, NUT_SHOT prompt is skipped. Not in spec | GAMETRACKER_DRAGDROP_SPEC.md Â§Contextual Buttons (add mutual exclusivity rule) |
| UNDOC-B3-018 | 3 | fieldZones.ts:380-415 | pointInPolygon() â€” full ray-casting algorithm for point-in-polygon detection. Spec mentions findZoneAtPoint() but doesn't detail the algorithm implementation | FIELD_ZONE_INPUT_SPEC.md Â§5.1 (add ray-casting implementation note) |
| UNDOC-B3-019 | 3 | fieldZones.ts:390-399 | parseSVGPath() â€” SVG path string parser for M/L commands used by polygon hit-testing. Not in spec | FIELD_ZONE_INPUT_SPEC.md Â§5.1 (add SVG path parsing detail) |
| UNDOC-B3-020 | 3 | FieldZoneInput.tsx:168-361 | Full landscape layout with flex container: SVG field left (60% width), zone info + fielder panel right (180px fixed). Spec Â§4.1 shows portrait layout with field above controls. Code uses iPad-friendly horizontal orientation | FIELD_ZONE_INPUT_SPEC.md Â§4.1 (update layout spec to match landscape implementation) |
| UNDOC-B3-021 | 3 | FieldZoneInput.tsx:248-260 | Animated selection indicator: pulsing circle at zone center with CSS animation (r: 2.5â†’3.5â†’2.5, 1s repeat). Spec only mentions "SelectedZoneHighlight" in component hierarchy | FIELD_ZONE_INPUT_SPEC.md Â§4.2 (add selection animation detail) |
| UNDOC-B3-022 | 3 | FieldingModal.tsx:282-300 | handleZoneSelect() maps ZoneTapResult depth to FieldingModal's DepthType (foul_shallowâ†’'shallow', foul_mediumâ†’'outfield', foul_catcherâ†’'shallow'). Foul zone depth remapping not in any spec | FIELD_ZONE_INPUT_SPEC.md Â§9.4 (add foul depthâ†’FieldingModal mapping) |
| UNDOC-B4-001 | 4 | mojoEngine.ts:398-419 | applyMojoChange() customDelta parameter allows bypassing trigger-based delta for USER_ADJUSTMENT. Spec Â§2.2 mentions user adjustment trigger but not custom override mechanism | MOJO_FITNESS_SYSTEM_SPEC.md Â§2.2 (add custom delta override) |
| UNDOC-B4-002 | 4 | mojoEngine.ts:424-451 | processMojoTriggers() â€” batch processing of multiple triggers with event array generation. Spec describes event-by-event processing but not a batch processor function | MOJO_FITNESS_SYSTEM_SPEC.md Â§2.2 (add batch trigger processing) |
| UNDOC-B4-003 | 4 | mojoEngine.ts:536-568 | calculateMojoGameStats() â€” aggregates MojoEntry into MojoGameStats with totalSwing, netChange, positiveEvents, negativeEvents. Not described in spec | MOJO_FITNESS_SYSTEM_SPEC.md Â§6.1 (add game stats aggregation) |
| UNDOC-B4-004 | 4 | fitnessEngine.ts:394-395 | Reliever/closer who didn't pitch gets 1.5Ã— position player recovery rate (didNotPlay Ã— 1.5). Spec doesn't define relief pitcher non-play recovery rate | MOJO_FITNESS_SYSTEM_SPEC.md Â§3.2 (add reliever rest-day recovery multiplier) |
| UNDOC-B4-005 | 4 | salaryCalculator.ts:662-727 | SalaryBreakdown return type with 12+ fields (baseSalary, positionFactor, traitFactor, ageFactor, performanceFactor, fameFactor, personalityFactor, finalSalary, trueValue, percentile, etc.) â€” full breakdown structure not in spec | SALARY_SYSTEM_SPEC.md Â§8 (add SalaryBreakdown interface) |
| UNDOC-B4-006 | 4 | salaryCalculator.ts:220-250 | Position merge groups: 2B/SSâ†’MI, LF/CF/RFâ†’OF for percentile calculations. Spec lists individual multipliers but not percentile grouping | SALARY_SYSTEM_SPEC.md Â§2.2 (add percentile grouping note) |
| UNDOC-B4-007 | 4 | salaryCalculator.ts:1250-1287 | Backward compatibility exports: calculateSalary(), calculateTeamSalaries(), getSalaryColor() wrapping newer functions | SALARY_SYSTEM_SPEC.md (appendix: API surface) |
| UNDOC-B4-008 | 4 | salaryCalculator.ts:1100-1150 | Display helpers: getSalaryTier(), getSalaryColor(), formatSalary(), getSalaryEmoji() â€” UI formatting utilities | SALARY_SYSTEM_SPEC.md (appendix: display helpers) |
| UNDOC-B4-009 | 4 | salaryCalculator.ts:874-929 | ROI tier calculation within calculateTrueValue â€” maps salary-to-performance ratio to tier labels (Elite Value, Strong Value, Fair, Overpaid, Anchor Contract) | SALARY_SYSTEM_SPEC.md Â§6 (add ROI tier definitions) |
| UNDOC-B4-010 | 4 | salaryCalculator.ts:770-830 | DHContext system: when calculating pitcher salary, checks if team uses DH to determine pitcher batting bonus eligibility. Non-DH leagues allow pitcher batting bonus, DH leagues suppress it | SALARY_SYSTEM_SPEC.md Â§3 (add DH context for pitcher batting) |
| UNDOC-B4-011 | 4 | FreeAgencyFlow.tsx:138-146, DraftFlow.tsx:434-443, RetirementFlow.tsx:157, RatingsAdjustmentFlow.tsx:292 | getGradeColor() and getGradeTier() duplicated across 5+ UI files with slightly different implementations. No centralized grade display utility | GRADE_ALGORITHM_SPEC.md (new section: display helpers â€” centralize into gradeEngine.ts) |
| UNDOC-B4-012 | 4 | DraftFlow.tsx:146-165 | 20 hardcoded mock prospect objects with personality field ('LEADER', 'COMPETITIVE', 'CALM', 'HOTHEAD'). Personality not in grade spec but used for display | GRADE_ALGORITHM_SPEC.md Â§Prospect Generation (add personality assignment) |
| UNDOC-B4-013 | 4 | fameEngine.ts:359 | FAN_FAVORITE Fame tier (5-15 Fame range) uses same name as the Fan Favorite designation system but is a DIFFERENT concept. Fame tier = cumulative Fame score label. FAN_FAVORITE_SYSTEM_SPEC = value-over-contract designation. Name collision may cause confusion | FAN_FAVORITE_SYSTEM_SPEC.md Â§Overview or fameEngine.ts (consider renaming Fame tier to avoid ambiguity, e.g. "CROWD_PLEASER") |
| UNDOC-B10-001 | 10 | seasonStorage.ts:762-917 | calculateStandings() â€” full standings calculation with W/L records, run differential, streaks, L10, home/away splits, games back | STAT_TRACKING_ARCHITECTURE_SPEC.md (new section: Standings) |
| UNDOC-B10-002 | 10 | seasonAggregator.ts:96-100 | Milestone detection integration via aggregateGameWithMilestones() â€” combines season aggregation with milestone checking | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§3.3 or MILESTONE_SYSTEM_SPEC.md (cross-reference) |
| UNDOC-B10-003 | 10 | careerStorage.ts | Career storage with DB_VERSION=3, career batting/pitching/fielding/milestones stores â€” partially implements Phase 5 | STAT_TRACKING_ARCHITECTURE_SPEC.md Â§5.5 (update: partially implemented) |
| UNDOC-B5-001 | 5 | FranchiseHome.tsx (228K) | Massive franchise hub page with 27+ tabs covering standings, stats, trades, playoffs, awards, etc. â€” far beyond what FRANCHISE_MODE_SPEC covers (which is just save slot management). The page is its own specification | Multiple specs (this spec only covers save slots, not the franchise hub content itself) |

| GAP-B11-001 | 11 | STORIES_AWARDS_CEREMONY.md S-AWD001 | AwardsCeremonyFlow.tsx:358-464 | League leaders auto-calculated from season stats with min qualifications, tie handling, leader rewards applied | LeagueLeadersScreen is entirely hardcoded mock data â€” no getAllBattingStats/getAllPitchingStats call, no min PA/IP check, rewards are display-only text not applied | Wire to seasonStorage for real league leader calculation |
| GAP-B11-002 | 11 | STORIES_AWARDS_CEREMONY.md S-AWD002 | AwardsCeremonyFlow.tsx:467-618 | Hybrid voting: calculate weighted scores, display top 3-5 candidates, scoring breakdown, "Other Player" opens search, selection calls addAward() | Candidates are hardcoded mock objects, "Other Player" button is non-functional, selection doesn't call addAward() â€” award is visual-only | Implement candidate scoring from season WAR/clutch/stats + wire addAward() on selection |
| GAP-B11-003 | 11 | STORIES_AWARDS_CEREMONY.md S-AWD015 | N/A (missing) | Trait replacement flow when player with 2 traits earns new trait: show current traits, show new, options Replace/Replace/Decline | No trait replacement flow exists anywhere â€” Booger Glove has trait LOSS but not the general replacement modal | Implement TraitReplacementModal per story UI wireframe |
| GAP-B11-004 | 11 | STORIES_AWARDS_CEREMONY.md S-AWD004 | AwardsCeremonyFlow.tsx:685-767 | Booger Glove: auto-select lowest fWAR, if <2 traits â†’ gain Butter Fingers, if 2 traits â†’ lose one | Player hardcoded, only trait-loss path rendered (no <2 traits â†’ Butter Fingers branch), auto-select logic absent | Add <2 traits branch, wire auto-select from real fWAR data |
| GAP-B11-005 | 11 | STORIES_AWARDS_CEREMONY.md S-AWD006 | AwardsCeremonyFlow.tsx:1440-1568 | MVP: show voting breakdown percentages, runner-up and 3rd get random trait, chemistry-weighted trait | Only winner gets trait roll, runner-up/3rd traits absent, voting percentages are hardcoded strings, no chemistry weighting | Add runner-up/3rd trait awards, real voting calc |
| GAP-B11-006 | 11 | STORIES_DRAFT.md S-DRF013 | DraftFlow.tsx:144-190 | Procedural draft class generation using round-based probability tables for grade distribution | Draft class is 20 hardcoded mock prospects â€” not procedurally generated, no probability tables | Implement procedural generation with round-based grade probabilities per spec |
| GAP-B11-007 | 11 | STORIES_DRAFT.md S-DRF008 | DraftFlow.tsx:262-274 | Pass/Skip only allowed when Farm roster full (â‰¥10 players) AND drafted at least 1 | Code only checks `draftedThisDraft < 1` â€” no Farm count check. Can pass with Farm at 3 | Add farmCount â‰¥ 10 check to handlePassPick |
| GAP-B11-008 | 11 | STORIES_DRAFT.md S-DRF009 | N/A (missing) | Full Farm Release Rule: when Farm=10, drafting requires releasing a player of same grade or worse | No release mechanism exists. Code at line 1347 says "can exceed 10". Farm over-flow is allowed without release | Implement release modal per spec before confirming pick when farmCount â‰¥ 10 |
| MIS-B11-001 | 11 | STORIES_FINALIZE_ADVANCE.md S-FA006 | FinalizeAdvanceFlow.tsx:287-310 | Retirement risk: ageâ‰¥35=+40%, ageâ‰¥32=+20%, ageâ‰¥30=+10%; YOSâ‰¥10=+30%, YOSâ‰¥6=+15%; salaryâ‰¥$20M=+20%, salaryâ‰¥$10M=+10%; careerAwards=+15%; priorDemotionsÃ—10%; max=90% | Code: ageâ‰¥35=+20%, ageâ‰¥32=+10%, ageâ‰¥30=+5%; YOSâ‰¥10=+15%, YOSâ‰¥7=+10%; salaryâ‰¥$10M=+15%, salaryâ‰¥$5M=+10%; NO careerAwards check; max=95%. All thresholds roughly halved from spec | Update calculateRetirementRisk to match spec formula exactly |
| MIS-B11-002 | 11 | STORIES_FINALIZE_ADVANCE.md S-FA005 | FinalizeAdvanceFlow.tsx:278-285 | Call-up salary: B=$1.2M, B-=$0.9M, C+=$0.7M, C=$0.6M, C-=$0.5M | Code: B=$1.2M (match), B-=$1.1M, C+=$1.0M, C=$0.9M, C-=$0.8M. C+/C/C- all overpriced vs spec | Update calculateRookieSalary to match spec values |
| GAP-B11-009 | 11 | STORIES_FINALIZE_ADVANCE.md S-FA007 | N/A (missing) | Swap: combined call-up + send-down in one atomic action with combined impact summary | No swap functionality exists â€” user must do separate call-up and send-down | Add Swap button and modal per spec |
| GAP-B11-010 | 11 | STORIES_FINALIZE_ADVANCE.md S-FA015 | FinalizeAdvanceFlow.tsx:366-377 | Season transition processing: ages +1, salaries recalculated, mojo reset, stats cleared, clutch reset, fame reset, YOS +1, rookie status applied | startSeasonTransition only runs cosmetic animation (processingStep counter) â€” no actual data transformations to IndexedDB | Wire actual season transition processing to storage layer |
| GAP-B11-011 | 11 | STORIES_FINALIZE_ADVANCE.md S-FA009 | FinalizeAdvanceFlow.tsx:352-364 | AI auto-manages rosters: call up by ceilingâ†’gradeâ†’age, send down by gradeâ†’ageâ†’salary, release excess | processAITeams only runs cosmetic animation with hardcoded results ("19 teams, 12 call-ups"). No actual roster changes | Implement AI roster management algorithm per spec priority rules |
| MIS-B11-003 | 11 | STORIES_FREE_AGENCY.md S-FA003 | FreeAgencyFlow.tsx:124-136 | Dice assignment order: best FA gets 7 (most probable), then 6,8,5,9,4,10,3,11,2,12 â€” bell-curve-optimized so best FAs roll most likely sums | DICE_PROBABILITIES uses sequential [2,3,4,5,6,7,8,9,10,11,12] â€” best FA gets 2 (least probable), worst gets 12 (also unlikely). Inverts intended probability distribution | Reorder DICE_PROBABILITIES to [7,6,8,5,9,4,10,3,11,2,12] per spec |
| MIS-B11-004 | 11 | STORIES_FREE_AGENCY.md S-FA005 | FreeAgencyFlow.tsx:288-291 | COMPETITIVE personality: FA goes to team with best H2H record against FA's former team (findRival()) | Hardcoded `TEAMS.find(t => t.id === "redsox")` â€” always routes COMPETITIVE FAs to Red Sox regardless of actual rivalry | Implement findRival() using H2H records or remove hardcoded team |
| MIS-B11-005 | 11 | STORIES_FREE_AGENCY.md S-FA005 | FreeAgencyFlow.tsx:293-299 | RELAXED personality: roll 1-N where N=number of teams, FA goes to rolled team (equal probability) | Uses `Math.random() > 0.5` (50/50 stay vs random team) â€” not spec's 1-N equal-probability roll across all teams | Replace 50/50 with 1-N team roll per spec |
| MIS-B11-006 | 11 | STORIES_FREE_AGENCY.md S-FA005 | FreeAgencyFlow.tsx:307-310 | TOUGH personality: FA goes to team with highest OPS | Uses `record.wins` (best win record) instead of team OPS | Change from wins to OPS for TOUGH destination |
| GAP-B11-012 | 11 | STORIES_FREE_AGENCY.md S-FA001 | FreeAgencyFlow.tsx | Spec defines direct FA signing: click FA card â†’ contract modal â†’ sign with cap space validation | No direct signing action exists. Flow is entirely dice-based (protection â†’ dice â†’ destination â†’ exchange). No contract modal or cap space check | Implement direct signing flow per S-FA001 or remove story if dice-only is intended |
| GAP-B11-013 | 11 | STORIES_FREE_AGENCY.md S-FA006 | FreeAgencyFlow.tsx | H2H record tracking: store head-to-head records between teams, use for COMPETITIVE personality rival calculation | No H2H storage or tracking system exists anywhere in codebase. COMPETITIVE hardcodes rival | Implement H2H tracking in franchise storage; wire to findRival() for COMPETITIVE routing |
| GAP-B11-014 | 11 | STORIES_FREE_AGENCY.md S-FA008 | FreeAgencyFlow.tsx:391-404 | Two-round flow with state persistence across sessions (resume interrupted FA) | Two rounds work in-session (currentRound 1â†’2) but no persistence â€” closing and reopening loses all FA progress | Add FA round state to offseason persistence |
| GAP-B11-015 | 11 | STORIES_FREE_AGENCY.md S-FA009 | FreeAgencyFlow.tsx:1283-1443 | Summary UI: team filter dropdown, net WAR/salary change per team, export/print | Summary shows moves grouped by round with personality icons but missing: team filter, net WAR/salary calculations, export/print functionality | Add team filter, WAR/salary deltas, and export to FA summary |

| GAP-B12-004 | 12 | STORIES_GAP_CLOSERS.md NEW-001 | FreeAgencyFlow.tsx | Direct FA signing: Sign button on FA card â†’ contract modal â†’ confirm with cap space validation | No sign button â€” flow uses dice-based protection/roll/destination/exchange only. No contract modal or cap space check | Already noted as GAP-B11-012. Implement direct sign flow or confirm dice-only is intended |
| GAP-B12-005 | 12 | STORIES_GAP_CLOSERS.md NEW-008 | src/hooks/useSeasonData.ts, useRosterData.ts | Data integration layer: useSeasonData, useRosterData, usePlayerData hooks for all route wrappers with loading + error states | Base hooks exist but usePlayerData not found. Not confirmed these hooks are used in route wrappers | Complete data integration layer â€” add usePlayerData, wire hooks to route components |
| GAP-B12-006 | 12 | STORIES_GAP_CLOSERS.md NEW-010 | GameTracker.tsx:2546,2624 | Player names clickable â†’ opens PlayerCard modal with full stats (batter, due-up, pitcher) | Basic onClick handlers set selectedPlayer state, but no full PlayerCard modal opens. Due-up names not confirmed clickable | Wire PlayerCard modal to player name clicks, add to due-up names |
| GAP-B12-007 | 12 | STORIES_GAP_CLOSERS.md NEW-013 | relationshipIntegration.ts | Relationship engine called at season start, affects morale, generates trade warnings | Integration wrapper exists with all functions exported, but no confirmed call from season initialization or morale calculation pipeline | Wire relationshipEngine to season init and morale calculations |
| GAP-B12-008 | 12 | STORIES_GAP_CLOSERS.md NEW-015 | narrativeIntegration.ts | Beat reporter stories affect fan morale: calculateStoryMoraleImpact() called on story creation, fan morale updated, visible in UI | Functions exist (calculateStoryMoraleImpact exported) but no confirmed integration call in game flow connecting narrative output to fanMoraleEngine | Wire narrative story creation to fanMoraleEngine.applyImpact() |
| GAP-B12-001 | 12 | STORIES_GAMETRACKER_FIXES.md GT-005 | EnhancedInteractiveField.tsx:3834 | After fielder drag, original position cleared or shown as ghost with clear distinction â€” no duplicate labels | Original fielder positions still rendered at line 3834 ("Fielders at original positions"). No GT-005 fix comment found. Fielder may still appear at both old and new location | Implement ghost/hide logic for original fielder position after drag |
| GAP-B12-002 | 12 | STORIES_GAMETRACKER_FIXES.md GT-016 | EnhancedInteractiveField.tsx | Visual throw path lines drawn between fielders as sequence is built, with animation and order badges (1,2,3) | Sequence badges exist but no throw-path line rendering found. No GT-016 fix comment in code | Add SVG line/path between fielders in throw sequence |
| GAP-B12-003 | 12 | STORIES_GAMETRACKER_FIXES.md GT-017 | EnhancedInteractiveField.tsx:1319 | Undo button prominently placed with clear undo count indicator | Undo button exists (line 1319) but no prominence enhancement or count indicator found. No GT-017 fix comment | Enhance undo button visibility and add count badge |
| GAP-B12-009 | 12 | STORIES_LEAGUE_BUILDER.md LB-015 | LeagueBuilder.tsx | League structure tree view with drag-drop team reassignment between divisions | No tree view visualization or drag-drop reassignment found | Implement league structure tree view |
| GAP-B12-010 | 12 | STORIES_LEAGUE_BUILDER.md LB-025,037 | LeagueBuilder.tsx | CSV import for teams and players with preview, validation, error highlighting | No file upload or CSV import functionality found for either teams or players | Implement CSV import for teams and players modules |
| GAP-B12-011 | 12 | STORIES_LEAGUE_BUILDER.md LB-036 | LeagueBuilderPlayers.tsx | Generate fictional players: count, target grade, position distribution, age range, traits | No "Generate Players" button or configuration modal found | Implement player generation using GRADE_ALGORITHM reverse algorithm |
| GAP-B12-012 | 12 | STORIES_LEAGUE_BUILDER.md LB-054,055 | LeagueBuilderRosters.tsx | Depth chart UI and bench preferences (pinch hit/run/defensive sub priority lists) | Data fields exist in TeamRoster interface (depthChart, pinchHitOrder, etc.) but no UI to configure them | Build depth chart and bench preferences UI screens |
| GAP-B12-013 | 12 | STORIES_LEAGUE_BUILDER.md LB-064,065,066 | LeagueBuilderDraft.tsx | Draft results recap, undo/redo picks, draft trade | Draft board and generation work but results view, pick undo, and draft trade are missing | Implement draft results, undo stack, and pick trading |
| GAP-B12-014 | 12 | STORIES_LEAGUE_BUILDER.md SS-020-025 | N/A (not implemented) | Standalone Playoff Mode: entry point on main menu, abbreviated setup wizard (5 steps), seeding UI | No playoff mode route, setup wizard, or standalone playoff entry exists. /world-series is results view only | Implement playoff mode entry and setup wizard |
| GAP-B12-015 | 12 | STORIES_PLAYOFFS.md S-PLY002 | WorldSeries.tsx | Playoff qualification: division winners auto-qualify, wildcards by best records, tiebreakers (H2Hâ†’div recordâ†’run diff) | Zero qualification logic. PlayoffTeam interface exists in playoffStorage but no qualification algorithm | Implement playoff qualification with tiebreakers |
| GAP-B12-016 | 12 | STORIES_PLAYOFFS.md S-PLY006 | WorldSeries.tsx | Home field advantage: 2-3-2 (7-game), 2-2-1 (5-game), 2-1 (3-game) patterns | Zero home field logic. No getHomeTeam() function, no pattern configuration | Implement home field patterns per spec |
| GAP-B12-017 | 12 | STORIES_PLAYOFFS.md S-PLY007 | WorldSeries.tsx | Start playoff game from bracket/series view, launches GameTracker with playoff context | No "Start Game" button. BracketView shows matchups but can't launch GameTracker for playoff games | Wire Start Game button to GameTracker with playoff context |
| GAP-B12-018 | 12 | STORIES_PLAYOFFS.md S-PLY008 | WorldSeries.tsx, playoffStorage.ts | Clinch/elimination detection: visual indicators, clutch multiplier bonuses applied | Zero implementation. isClinch/isElimination fields exist in SeriesState but never calculated | Implement detectClinch() and detectElimination() per spec |
| GAP-B12-019 | 12 | STORIES_PLAYOFFS.md S-PLY011 | WorldSeries.tsx | Series detail view: game-by-game results, pitchers, series leaders, upcoming game info | No series drill-down view. BracketView shows cards but no detailed series view | Implement SeriesDetailView component |
| GAP-B12-020 | 12 | STORIES_PLAYOFFS.md S-PLY014,015,016,017,018 | WorldSeries.tsx | Playoff stats tracking, roster management, exhibition series, records, season end transition | Zero implementation for all 5 stories. playoffStorage has PlayoffPlayerStats interface but no aggregation | Implement playoff stats pipeline, roster management, exhibition mode, records tracking, and season transition |
| GAP-B12-021 | 12 | STORIES_RATINGS_ADJUSTMENT.md S-EOS002 | RatingsAdjustmentFlow.tsx:168 | Position detection using scalable thresholds: SP/RP/CP from starts/relief/saves, UTIL/BENCH from games | No detection logic â€” `detectedPosition: player.position` copies as-is. No threshold application | Implement detectPosition() per EOS_RATINGS_ADJUSTMENT_SPEC.md |
| GAP-B12-022 | 12 | STORIES_RATINGS_ADJUSTMENT.md S-EOS003 | RatingsAdjustmentFlow.tsx | Peer pool assignment: min 6 players, merge small pools (CPâ†”RP, 1Bâ†”3B, etc.) | Zero peer pool logic. All players displayed by team, not by position group | Implement getComparisonPool() with merge logic |
| GAP-B12-023 | 12 | STORIES_RATINGS_ADJUSTMENT.md S-EOS004-005 | RatingsAdjustmentFlow.tsx:172-181 | WAR/salary percentile calculation within peer pools | UI displays percentiles but values are `Math.floor(Math.random() * 100)` â€” mock random data | Replace mock percentiles with real WAR/salary percentile calculations |
| GAP-B12-024 | 12 | STORIES_RATINGS_ADJUSTMENT.md S-EOS006 | RatingsAdjustmentFlow.tsx:133 | Rating adjustment: delta = WAR percentile - salary percentile, asymmetric tier factors, WAR-to-rating mapping (bWARâ†’POW/CON, rWARâ†’SPD, fWARâ†’FLD/ARM, pWARâ†’VEL/JNK/ACC), Â±10 cap | `netChange = Math.floor(Math.random() * 20) - 8` â€” random, not formula-based. No delta calculation, no factor application, no WAR-to-rating mapping | Implement calculateRatingAdjustment() with asymmetric factors per spec |
| GAP-B12-025 | 12 | STORIES_RATINGS_ADJUSTMENT.md S-EOS010 | RatingsAdjustmentFlow.tsx | Salary adjustment System B: True Value from WAR, 50% gap adjustment, salary floor/ceiling by grade | salaryChange = netChange Ã— 0.3 (arbitrary). No True Value calculation, no 50% gap formula, no floor/ceiling | Implement calculateSalaryAdjustment() with True Value and grade-based bounds |

| MIS-B13-001 | 13 | STORIES_RETIREMENT.md S-RET001 | RetirementFlow.tsx:125-145 | Retirement probability rank-based within roster: `max(5, 50-(ageRank*(45/rosterSize)))` where oldest gets highest probability | Code uses absolute age-based lookup table (age 42=47%, 25=3%, etc.) â€” no rank-based calculation | Implement rank-based retirement probability per spec formula |
| MIS-B13-002 | 13 | STORIES_TRADE.md S-TRD013 | TradeFlow.tsx:1144-1146 | Accepting counter-offer executes AI's modified proposal (counter trade data) | `setAIResponse("accepted")` but does NOT update `currentTrade` to `aiCounter` data â€” accepted screen shows original trade, not counter | Set `currentTrade = aiCounter` on counter acceptance |
| GAP-B13-001 | 13 | STORIES_RETIREMENT.md S-RET005 | RetirementFlow.tsx | Probability recalculation: after each retirement, remaining players' probabilities increase as roster shrinks | No recalculation â€” probabilities are fixed after initial calculation | Implement dynamic probability recalculation |
| GAP-B13-002 | 13 | STORIES_RETIREMENT.md S-RET007,009 | RetirementFlow.tsx:781-797 | Jersey retirement with real career data (teams played for, WAR, seasons) persisted to IndexedDB | `teamsPlayedFor` hardcoded with fake stats ("8 seasons/32.1 WAR") for every player. No IndexedDB persistence | Wire real career data; add retired numbers to franchise storage |
| GAP-B13-003 | 13 | STORIES_SEASON_END.md S-SEP001-014 | N/A (not implemented as discrete phase) | Season End Processing: 7-screen flow (Standingsâ†’MVPâ†’Championshipâ†’Mojo Resetâ†’Archiveâ†’Complete) | NO dedicated Season End flow exists. Responsibilities scattered across FranchiseHome standings tab and FinalizeAdvanceFlow timer simulation | Implement SeasonEndFlow component as discrete offseason Phase 1 |
| GAP-B13-004 | 13 | STORIES_SEASON_END.md S-SEP004-006 | N/A (not implemented) | Postseason MVP: face-down card reveal from playoff WAR, selection with +10 rating bonus | Entirely absent â€” no MVP card reveal, no pWAR ranking, no rating bonus application | Implement postseason MVP card reveal and rating bonus |
| GAP-B13-005 | 13 | STORIES_SEASON_END.md S-SEP008-009 | N/A (not implemented) | Championship fame bonus (+1 Fame to roster), championship morale boost | No code to apply fame or morale bonuses to championship roster | Implement championship fame and morale effects |
| GAP-B13-006 | 13 | STORIES_TRADE.md S-TRD018-021 | TradeFlow.tsx | Waiver Wire: claim screen + results screen with waiver order, claim priority, player selection | WaiverPlayer interface defined (line 76-83) but ZERO UI rendering â€” both screens entirely unimplemented | Implement waiver wire claim and results screens |
| GAP-B13-007 | 13 | STORIES_TRADE.md S-TRD014-015 | TradeFlow.tsx | AI trade proposals: AI generates trade offers using WAR differential, position need, salary analysis | Single hardcoded mockAIProposals entry. No real AI trade generation or evaluation logic | Implement AI trade proposal generation engine |
| GAP-B13-008 | 13 | STORIES_TRADE.md S-TRD016-017 | TradeFlow.tsx | Three-way trades: validation logic, all three teams evaluate independently | Type defined but zero validation flow for three-team trades | Implement three-way trade validation and evaluation |

### Batch 14: Reference Docs (Data Accuracy)

| ID | Batch | Spec | Code Location | Spec Says | Code Says | Recommended Fix |
|----|-------|------|---------------|-----------|-----------|-----------------|
| MIS-B14-001 | 14 | smb_maddux_analysis.md | src/engines/detectionEngine.ts (Maddux check) | Maddux threshold: 85 pitches for complete game shutout | Code uses 100 pitches as Maddux threshold | Decide on correct threshold â€” 85 is traditional Maddux, 100 is more lenient. Update spec or code to match. |

**Reference doc currency status (not code fixes â€” documentation TODOs):**

| Spec | Currency | Notes |
|------|----------|-------|
| SMB4_GAME_REFERENCE.md | PARTIALLY_CURRENT | Balks section stale (balks removed from SMB4/app Jan 25 2026). FIERY/GRITTY chemistry types undocumented. Trait tier system (Gold/Silver/Bronze) referenced but not in code. Core mechanics (pitching, batting, fielding, baserunning) accurate. |
| grade_tracking_system.md | OUTDATED | Comprehensive grade tracking design doc with progression formulas, grade decay, and evaluation criteria. Zero implementation exists â€” no grade tracking engine, no UI, no storage. Document describes aspirational feature not yet built. |
| smb4_traits_reference.md | PARTIALLY_CURRENT | 45+ trait names present and match code trait lists. Tier system (Gold/Silver/Bronze stat modifiers) documented but not implemented in code â€” traits are boolean presence only. Trait descriptions accurate. |
| smb_maddux_analysis.md | PARTIALLY_CURRENT | Maddux detection logic exists in code. Threshold mismatch: doc says 85 pitches, code uses 100 (MIS-B14-001). Statistical analysis tables may be stale. Core concept (CG shutout under N pitches) correctly implemented. |
| app_features_and_questions.md | OUTDATED | Early-phase design document with feature questions and brainstorming. Many questions since answered by implementation. Does not reflect current app state. Useful as historical context only. |

### Batch 15: Audit Reports (Currency Check)

No code-fix findings. These are report currency assessments.

| Spec | Currency | Notes |
|------|----------|-------|
| AUDIT_REPORT.md | OUTDATED | Jan 26, 2026. Claims 22/103 stories DONE, 44 orphaned components. Predates Feb 3-5 fixes (GameTracker persistence, league builder routes, W/L/SV pitcher stats, MAJ-06 through MAJ-12). Many "not wired" claims now stale. Should be archived as historical. |
| BASEBALL_STATE_MACHINE_AUDIT.md | CURRENT | Describes legal state transitions, inference rules, runner advancement tiers. BALK correctly marked as "not in SMB4". Foundational spec-level document â€” not implementation-dependent. Remains valid. |
| BROKEN_IMPLEMENTATION_AUDIT.md | PARTIALLY_CURRENT | Jan 31, 2026. 9 critical GameTracker/EnhancedField issues. ~40-60% appear fixed by Feb 5 session (GT-003 PlayTypeModal routing, GT-004 fielder-only flow). Remaining issues (fielder teleportation, duplication) need browser verification. |
| BROKEN_IMPLEMENTATION_AUDIT_v2.md | PARTIALLY_CURRENT | Jan 31, 2026. Adds 6 issues (#26-31) from hands-on testing, 31 total. CLASSIFY routing appears fixed (performClassification lines 2730-2805). Fielder teleportation (#30), duplication (#26), layout (#31) not verified fixed. |
| BROWSER_TEST_REPORT.md | PARTIALLY_CURRENT | Feb 3, 2026. Most recent report. 7 bugs all claimed "FIXED". League Builder route fixes (BUG-001 through BUG-006) verified current. GameTracker persistence (BUG-007) fix present but full verification needed. |

### Batch 16: Bug Resolution Reports (Fix Verification)

No new code-fix findings. These are fix verification results.

| Spec | Currency | Notes |
|------|----------|-------|
| BUG_RESOLUTION_EXHIBITION.md | CURRENT | Feb 4, 2026. All 26 documented bug fixes verified still in code â€” no reverts detected. EXH-001 through EXH-036 (skipping open/partial items). Covers ActionSelector width, FielderIcon redesign, strikeout skip, inside-park HR, pitcher in lineup, game timer, end-game routing, inning logic, FC handling, mojo/fitness editing. |
| BUG_RESOLUTION_LEAGUE_BUILDER.md | OUTDATED | Template document only â€” "None yet" for both fixed and open bugs. Referenced implementing files all exist but no bug records populated. |
| BUG_RESOLUTION_LOAD_FRANCHISE.md | OUTDATED | Template document only â€” "None yet" for both fixed and open bugs. useFranchiseData.ts and franchiseStorage.ts exist. |
| BUG_RESOLUTION_NEW_FRANCHISE.md | OUTDATED | Template document only â€” "None yet" for both fixed and open bugs. FranchiseSetup.tsx exists with implementation. |
| BUG_RESOLUTION_PLAYOFF_MODE.md | OUTDATED | Template document only â€” "None yet" for both fixed and open bugs. WorldSeries.tsx exists with implementation. |

### Batch 17: Architectural Audit Reports (Currency Check)

No code-fix findings. These are report currency assessments.

| Spec | Currency | Notes |
|------|----------|-------|
| COHESION_REPORT.md | OUTDATED | Jan 26. Architectural dependency map and user journey analysis. Journey maps (1-7) still accurate as spec reference. Implementation status claims stale (predates Feb 3-5 fixes). Use as reference only, not for implementation tracking. |
| COHESION_REPORT_DRAFT.md | OUTDATED | Jan 26. Draft version completely superseded by final COHESION_REPORT.md. Candidate for deletion during Phase 2 consolidation. |
| COMPREHENSIVE_GAP_ANALYSIS.md | OUTDATED | Feb 3. INVALID PREMISE: Analysis assumes src_figma/ is standalone, doesn't account for shared src/ architecture. Claims 29 storage utils "missing" but they exist in src/utils/ and are imported via ../../. Fundamentally flawed. Archive. |
| CORRECTED_GAP_ANALYSIS.md | PARTIALLY_CURRENT | Feb 3. Some bugs fixed since (aggregateGameToSeason now called per useGameState.ts:2771). Implementation Priority section stale â€” P0 item done. Bug inventory ~50% accurate. |
| DRAGDROP_AUDIT_2026-01-31.md | CURRENT | Jan 31. Component inventory verified (RunnerDragDrop 483L, UndoSystem 347L, LineupCard 592L match). 7 UI/UX gaps still present. Priority guide still valid for Phase 8+ work. |

### Batch 18: Data & Execution Reports (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| DUMMY_DATA_SCRUB_REPORT.md | OUTDATED | Feb 5. 47 dummy data instances documented. Walk classification bug (reported as dummy data) has since been FIXED. TODO annotations still present but underlying code has been updated. |
| FIX_EXECUTION_REPORT_2026-02-05.md | PARTIALLY_CURRENT | Feb 5. 4 fixes verified still in code (CRIT-GT-001 force out, CRIT-XL-001 TP type, CRIT-XL-002, MIN-GT-013 disabled buttons). 19 BLOCKED items still blocked. Doesn't reflect Feb 6 commits (MAJ-06 through MAJ-12). |
| GAMETRACKER_AUDIT_REPORT.md | OUTDATED | Jan 25. Claims At-Bat flow FUNCTIONAL but predates discovery of walk classification bug (Feb 3). 3 weeks old, doesn't reflect any Feb fixes. |
| GAMETRACKER_BUGS.md | PARTIALLY_CURRENT | Jan 27. 13 bugs listed. BUG-004 (WAR leaderboards) NOW WIRED, BUG-013 (impossible events) FIXED per Feb 5 batch-fix. BUG-003 (GOâ†’DP auto-correction) still blocked (autoCorrectResult orphaned). Predates Feb 3 bug discoveries. |
| GAMETRACKER_BUG_AUDIT_PLAN.md | PARTIALLY_CURRENT | Feb 3. 7 bugs identified. Walk classification bug (BUG-001/002/003) FIXED in code. D3K handling, SB leading runner logic status unclear. Plan partially executed. |

### Batch 19: GameTracker Test & Gap Reports (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| GAMETRACKER_REDESIGN_GAP_ANALYSIS.md | OUTDATED | Feb 2. IFR support incorrectly marked missing from Enhanced field â€” now exists via playClassifier.ts. Most other UI gaps still valid but 1 false negative. |
| GAMETRACKER_TEST_RESULTS_2026-01-31.md | OUTDATED | Jan 31. STANDS_SETBACK error now fixed. Pre-fix test results. Superseded by Feb 5 results. |
| GAMETRACKER_TEST_RESULTS_2026-02-05.md | CURRENT | Feb 5. 273 baseball logic + 106 regression tests all passing. Baseline matches current. Correctly identifies autoCorrectResult() as orphaned. |
| GAPS_MASTER.md | OUTDATED | Jan 26. Missing 10 days of fixes. Superseded by CURRENT_STATE.md. GAP-001 (WAR) partially fixed, GAP-004 (empty data) partially fixed by Feb 5 wiring. |
| INFERENTIAL_LOGIC_GAP_ANALYSIS.md | CURRENT | Feb 2. Dual inference system analysis (FieldingModal matrices + playClassifier) remains accurate. One stale file path: adaptiveLearningEngine.ts renamed to adaptiveLearningIntegration.ts on Feb 5. |

### Batch 20: Traceability & System Audits (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| LEGACY_VS_FIGMA_AUDIT.md | PARTIALLY_CURRENT | Feb 2-3. Core structural claims valid (shared architecture, 42 build errors fixed). "Orphaned engines" list ~60% outdated â€” mWAR, fanMorale, narrative, relationship engines NOW WIRED as of Feb 5. salaryCalculator, mojoEngine still not fully UI-connected. |
| SPEC_TO_CODE_AUDIT_REPORT.md | CURRENT | Jan 25. All 10 action items resolved. bWAR/pWAR/fWAR/mojo/fame match rates (95-100%) still accurate. Archive as "resolved audit" reference. |
| SPEC_TO_CODE_TRACEABILITY.md | PARTIALLY_CURRENT | Jan 25. Core WAR traceability accurate. Status symbols outdated: FWAR/RWAR/MWAR shown as warning but now wired per Feb 5 MAJ-01. Claims "no orphaned code" but orphans still exist (67+ dead functions). |
| SPEC_UI_ALIGNMENT_REPORT.md | CURRENT | Feb 5. Most recent audit. 11 CRITICAL + 24 MAJOR findings accurately reflect codebase. 28 verified-correct specs confirmed. Reference document for current baseline. |
| TEST_MATRIX.md | CURRENT | Recent. 8 base states x 18 result types. BALK correctly excluded. Auto-correction rules verified. Could expand to include D3K/IFR edge cases. |

### Batch 21: Flow & Readiness Audits (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| UI_FLOW_CRAWL_REPORT.md | OUTDATED | Feb 5. All 4 critical bugs reported (RetirementFlow crash, FreeAgencyFlow crash, GameTracker infinite loop, FranchiseSetup selection) have been FIXED since report was generated. Reflects pre-fix state. |
| EOS_RATINGS_READINESS.md | PARTIALLY_CURRENT | Jan 29. Said "Ready for Figma Design" but RatingsAdjustmentFlow.tsx now fully built (1,479 lines, 4 screens implemented). Still using mock data with TODO comments for real data wiring. Document doesn't reflect implementation progress. |

### Batch 22: Meta / Process Documents A (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| AI_OPERATING_PREFERENCES.md | CURRENT | Session-start reference. Actively followed. Pipeline and spec references accurate. |
| BASEBALL_LOGIC_TEST_PLAN.md | PARTIALLY_CURRENT | Feb 2. 185 test cases planned across 9 categories. No corresponding test file found. May be superseded by gametracker-logic-tester skill (501 dynamic test cases). |
| CLAUDE_CODE_CONSTITUTION.md | CURRENT | Collaboration framework. Patterns followed in recent commits. |
| CURRENT_STATE.md | CURRENT | Feb 6. Actively maintained. Reflects all recent work including WAR wiring, bug fixes, pipeline V2. |
| DRAGDROP_IMPLEMENTATION_PLAN.md | OUTDATED | Jan 31. Plan for drag-drop feature set. Project pivoted to Pipeline V2 before executing. 11 drag-drop stories are parking lot items. |

### Batch 23: Meta / Process Documents B (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| FEATURE_TEMPLATE.md | CURRENT | Live template for feature documentation. Pattern matches current docs. No indication of obsolescence. |
| MASTER_SPEC_ERRATA.md | CURRENT | Live corrections document. Contains recent errata (CONTRACTED_TEAM, GRADE_DERIVATION_FORMULA). Actively referenced during audit. |
| PIPELINE.md | CURRENT | Feb 6. Master roadmap updated with Pipeline V2 (exhaustive audit, fix, verify, validate). References all 5 skills + exhaustive-spec-auditor. |
| README.md | PARTIALLY_CURRENT | Jan 24. Good category structure. Missing Pipeline V2, exhaustive-spec-auditor, and recent reports. Needs refresh. |
| RECONCILIATION_PLAN.md | CURRENT | Feb 3. Status: COMPLETE. All 42 TypeScript errors fixed. Build passing. |

### Batch 24: Meta / Process Documents C (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| SESSION_LOG.md | CURRENT | Feb 6. Actively maintained (9,211 lines). Documents today's work on spec auditor v2 and batch 1. |
| SESSION_LOG_SUMMARY.md | OUTDATED | Jan 30. Missing Feb 5-6 work. Shows 188 tests passing (actual: 5,077). Stale. |
| TEAM_VISUALS.md | CURRENT | Jan 26. Static reference data (20+ team logos, colors, parks). Doesn't age. |
| KBL_TRACKER_FIGMA_MAKE_PROMPT_V2.md | PARTIALLY_CURRENT | Jan 27. Design direction accurate (1990s SNES aesthetic). No V3 found. Doesn't reflect Feb completion status. |
| KBL_TRACKER_UI_UX_PLANNING.md | PARTIALLY_CURRENT | Jan 27. Architecture valid. Implementation status claims outdated (says "not complete" but flows now working per Feb 5 crawl). |

### Batch 25: Figma/Planning Documents (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| FIGMA_BLURB_FREE_AGENCY_EXCHANGE.md | CURRENT | Jan 29. Salary matching (+-10%), WITHIN RANGE badge, fallback rule all correctly implemented in FreeAgencyFlow.tsx. |
| FIGMA_COMPLETION_MAP.md | PARTIALLY_CURRENT | Feb 5. Generated from UI crawl. Free Agency incorrectly marked CRASH (actually works). FREE_AGENCY_EXCHANGE marked N/A (should be CURRENT). Most other assessments accurate. |
| FIGMA_GAMETRACKER_IMPLEMENTATION_PLAN.md | PARTIALLY_CURRENT | Feb 2. 8-phase plan. Some elements complete (saveDetector.ts), some partial (substitution modals), some missing. Plan document, not status report. |

### Batch 26: Missing Specs (Verification)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| EOS_RATINGS_ADJUSTMENT_SPEC.md | CURRENT | Jan 20. v4.1 with scalable position detection. RatingsAdjustmentFlow.tsx (63KB) implements spec. Aligned. |
| LEAGUE_BUILDER_SPEC.md | OUTDATED | Jan 29 DRAFT. Modular architecture doesn't match fragmented file structure (5 sub-pages). Needs reconciliation. |
| PLAYOFF_SYSTEM_SPEC.md | OUTDATED | Jan 23. Spec ambitious but implementation partial per CURRENT_STATE. Bracket system only basic. |
| SEASON_SETUP_SPEC.md | PARTIALLY_CURRENT | Jan 29 DRAFT. 6-step wizard structure matches FranchiseSetup. Feb 5 bugfixes not reflected. |
| FEATURE_WISHLIST.md | PARTIALLY_CURRENT | Jan 24. 124 items tracked. At least 6 HIGH items marked MISSING are actually WIRED as of Feb 5 (mWAR, Fan Morale, Narrative, Detection, Relationships). |

### Batch 27: Missing Planning & Reference (Currency Check)

No new code-fix findings.

| Spec | Currency | Notes |
|------|----------|-------|
| REQUIREMENTS.md | OUTDATED | Jan 2025. P0/P1 status claims contradicted by implementation. Data persistence marked "not done" but IndexedDB fully implemented. |
| RALPH_FRAMEWORK.md | CURRENT | Jan 25. Development framework. Actively referenced in CLAUDE.md. Prescriptive, not feature-specific. |
| IMPLEMENTATION_PLAN.md | PARTIALLY_CURRENT | Jan 25. NFL verification protocol still used. Phase 1-X schedule superseded by Pipeline V2. |
| IMPLEMENTATION_PLAN_FULL.md | OUTDATED | Jan 30. Claims 331 stories, 85% pending, 96-116 day estimate. All superseded by Pipeline V2 approach. |
| TESTING_IMPLEMENTATION_PLAN.md | CURRENT | Feb 3. Phase 0 regression tests complete (106 tests). Actively verified in CURRENT_STATE. |

## Previously Known Items (from prior pipeline runs)

Items that overlap with existing SPEC_UI_ALIGNMENT_REPORT.md or other audit reports.

| ID | Source Report | Status | Notes |
|----|-------------|--------|-------|
| KNOWN-B1-001 | SPEC_UI_ALIGNMENT_REPORT.md lines 134-156 | VERIFIED CORRECT | bWAR constants (runsPerWin, FIP, replacement level, park factor blend, fWAR adjustments) all confirmed matching |

---

## Batch Completion Log

| Batch | Date | Specs | Matches | Mismatches | Gaps | Undoc | Contradictions |
|-------|------|-------|---------|------------|------|-------|----------------|
| 1 | 2026-02-05 | 5 | 112 | 2 | 7 | 23 | 0 |
| 2 | 2026-02-06 | 5 | 96 | 5 | 14 | 14 | 0 |
| 3 | 2026-02-06 | 5 | 166 | 18 | 28 | 22 | 0 |
| 4 | 2026-02-06 | 5 | 95 | 9 | 26 | 13 | 0 |
| 5 | 2026-02-06 | 5 | 100 | 32 | 118 | 43 | 0 |
| 6 | 2026-02-06 | 5 | 148 | 37 | 59 | 30 | 0 |
| 7 | 2026-02-06 | 5 | 209 | 40 | 78 | 38 | 0 |
| 8 | 2026-02-06 | 4 | 132 | 32 | 60 | 25 | 0 |
| 9 | 2026-02-06 | 5 | 193 | 52 | 87 | 38 | 0 |
| 10 | 2026-02-05 | 5 | 31 | 4 | 12 | 3 | 0 |
| 11 | 2026-02-06 | 5 | 22 | 6 | 15 | 0 | 0 |
| 12 | 2026-02-06 | 5 | 77 | 0 | 25 | 0 | 0 |
| 13 | 2026-02-06 | 5 | 35 | 2 | 10 | 0 | 0 |
| 14 | 2026-02-06 | 5 | 8 | 1 | 0 | 0 | 0 |
| 15 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 16 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 17 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 18 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 19 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 20 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 21 | 2026-02-06 | 2 | 2 | 0 | 0 | 0 | 0 |
| 22 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 23 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 24 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 25 | 2026-02-06 | 3 | 3 | 0 | 0 | 0 | 0 |
| 26 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
| 27 | 2026-02-06 | 5 | 5 | 0 | 0 | 0 | 0 |
